commit b02e6b4d1bb8ca35717ab3091d258f2c39c78c24
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 19 12:22:27 2013 -0500

    Remove unused frame-related fields and methods.

commit 687907a1e36ba35056b94c88fe23d6b7ee3cf617
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 17 10:22:02 2013 -0500

    isBindingFrame no longer used.

commit 45d3af1710e258ce7f4f85cb5ce624758e75ef1b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 15 22:56:15 2013 -0500

    Rework frame management, and backref/lastline along with it.
    
    These changes should bring us more in line with the way other
    implementations manage "frame" data and bindings that capture it.
    It should also reduce the cost of framing, binding captures,
    blocks and procs, and operations that manipulate blocks and procs
    like define_method and instance_eval.
    
    The new logic works as follows:
    
    * Rather than a binding immediately duplicating a frame, it
      instead grabs a reference to it and marks it as captured.
    * When popping a frame, if it has been marked captured it is
      discarded rather than being cleared. This moves the cost of
      creating a binding to the pop of the surrounding method, which
      reduces the cost of nested bindings re-cloning the frame many
      times.
    * Bindings that are still active (have captured a frame that has
      not been popped) will update the method's frame data in-place.
    * Once the frame has been popped, it will live only in that
      binding.
    
    This commit passes mspec ci and test:mri19, but I am continuing
    to test it for a while.
    
    Note that this commit also moves backref and lastline to
    the frame. They have always been frame-local, but for a long time
    we kept them on the scope so we could avoid touching the frame for
    methods that did not need it. However, because we used the scope,
    it was difficult or impossible to isolate backref and lastline
    changes to the block. Moving to the frame, which has a lifespan
    only as long as the method that activated it, makes isolation
    easier.
    
    This should also make it easier to fix thread-safety issues with
    backref/lastline, as reported in JRUBY-7167.

commit 553a344cb28bfc4953b486f97f12d0443f0cb0ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:25:01 2013 -0500

    Move lastline getting/setting into context, to hide it.

commit 3fc004fbe83155a4e02891de955d37e26e654ec8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:03:47 2013 -0500

    Start moving backref logic back under thread context.
    
    In order for us to start optimizing backref logic away, we need to
    hide how it is stored and retrieved. Moving back under
    ThreadContext allows us to have more flexibility in implementing
    new backref mechanisms.

commit 36d8163101cc1cd666f68ca5ebec4170c890c62b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jun 11 11:49:51 2013 -0500

    Remove unused imports.

commit ba5aab6741d804baf755e3f4af3ae6adda5d8723
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 3 20:51:24 2013 -0500

    Revert "Defer cloning Binding constructs until actually needed."
    
    This reverts commit 7db296ce66aa0bd16697df52ccfdd7cd13d868ce.

commit 1fe90812e44d75353f6455b3454acff49b9315e1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 29 10:02:28 2013 +0100

    Tweaks to improved 2.0 caller/backtrace logic.
    
    * Reuse level/length logic across methods
    * Reuse gathering logic across methods
    * Handle special cases (length = 0, size < 0) properly
    * Other tweaks to get 2.0 test_backtrace 100%
    * Style fixes

commit 385978547894fa7628cb599d7c94ebf816a6b502
Author: Dario Bertini <berdario@gmail.com>
Date:   Fri Mar 29 00:20:27 2013 +0100

    Fixed off-by-one error and handled malformed arguments

commit 97a3f01592dd19c7f7215ea7b4958e905d707297
Author: Dario Bertini <berdario@gmail.com>
Date:   Thu Mar 28 22:49:45 2013 +0100

    Added optional length to caller() method and support for Range argument

commit 7db296ce66aa0bd16697df52ccfdd7cd13d868ce
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 28 07:38:07 2013 +0000

    Defer cloning Binding constructs until actually needed.

commit 281ead709e1e855b552a42e86e48f8f91ca8ebb5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 9 02:58:56 2013 -0600

    [2.0] Add Thread::Backtrace::Location and related methods.
    
    * Thread#backtrace_locations
    * Kernel#caller_locations
    * Exception#backtrace_locations (not official, but should be soon)

commit bf37b5b6548a60bcf4395319b2b47b946eccc04a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 7 00:55:34 2013 -0600

    Tweaks to get more of TracePoint working.
    
    * Add a safeguard in binding creation for empty RubyClass stack
    * Add b_call, b_return, thread_begin and thread_end events
    * Wire up new events
    * Mask out 2.0 events from non-2.0 tracing

commit 61678ac1a2514a9932276f8d527816a5980a94b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 20:41:40 2013 +1100

    Fix more references to CPL.
    
    The phrase "Common Public License" was split across two lines in
    our default header, which caused it to be missed during earlier
    search/replace. Also, we did not replace the CPL URL in the
    header with the EPL URL.

commit 330fef3b0fc18af477ccea19bd278669667f31bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 12 14:49:29 2013 -0600

    Switch JRuby's CPL license to EPL.
    
    Governance of the CPL license was moved to the Eclipse Foundation
    at some point in the past, and Eclipse blessed the EPL (Eclipse
    Public License v1.0) as the successor to CPL. Because the CPL
    contains a clause allowing transparent upgrades to future blessed
    successor licenses, we can make the move to EPL without
    re-contacting past contributors.
    
    The change in going from CPL to EPL largely just removes some
    punitive language that apparently made many companies nervous. All
    other language in the license remains identical.
    
    Several documents about Eclipse's move from CPL to EPL are here:
    
    http://www.eclipse.org/legal/cpl2epl/
    
    Note that Eclipse's move came before the blessing of EPL as the
    upgrade path for CPL, so they had to do a bit more legal juggling.
    With Eclipse now the administrator of CPL and with their blessing
    of EPL as the upgrade path for CPL, all we need to do is make the
    move.

commit efd8a3df54daa1e5b6853d07db52fd6ac23a767b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 28 10:54:09 2012 -0600

    More decoupling of constant lookup from ThreadContext.
    
    * setConstantInCurrent moved to StaticScope
    * setConstantInModule moved to RuntimeHelpers
    * setConstantInObject moved to RuntimeHelpers
    * getConstantDefined moved to StaticScope#isConstantDefined
    * A few more ThreadContext#getConstant calls eliminated

commit d1898406206175543afaa19c08637d539abd7a51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 28 09:37:40 2012 -0600

    Remove unused/rarely used params to const lookup, use StaticScope.
    
    In an effort to eliminate the deopt caused by const access from
    Ruby code, I'm working toward making all constant access work
    against StaticScope rather than against ThreadContext and the
    current DynamicScope (which forces us to push dummy scopes where
    we don't really need any). This commit starts pulling out calls to
    ThreadContext.getConstant, which requires a DynamicScope to be
    present, and also removes some unused or rarely-used arguments
    from the const lookup call chain to simplify the transition.

commit 13057bcd31e3b843cc0e00c87dd3ceceed85b919
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 31 15:23:21 2012 -0500

    Reenable fast math operations.
    
    Fast math ops had been disabled some time last year to further 1.9
    compatibility, since several Fixnum operators had differing
    behavior in 1.9 mode. The compiler complexities of making both the
    1.8 and 1.9 paths optimizable were too great at the time, and also
    introduce complexity that will eventually just go away once 1.9
    logic is the only logic.
    
    In order to reenable fast operators without breaking 1.9 mode, I
    opted to remove the bifurcated "19" versions of those Fixnum
    methods that have differing logic in favor of a boolean check to
    do the same. This adds a bit of overhead to all of the operators
    in question, but allows safely enabling fast operators, greatly
    improving the performance of math (as it did before).
    
    This commit also includes a small override for RubyFixnum's
    convertToInteger(String) method, since there's no good reason
    we should have have to do a hard redispatch back to Fixnum when
    all we need is an Integer, regardless of what method is specified.

commit f13732cd18011c5f7556e57aa2bd10940765fc97
Author: kares <self@kares.org>
Date:   Thu Oct 27 17:58:33 2011 +0200

    support for separate profiling of Ruby runtimes (useful for profiling webapps booted via jruby-rack)

commit 9bfc332321d2581b4bdbe50e785563779a48d833
Author: kares <self@kares.org>
Date:   Fri Oct 21 13:20:08 2011 +0200

    introduce ProfiledMethod a holder object for a method and name

commit 28e5a137384e371b78ab1b30b3efa94021a9723e
Author: kares <self@kares.org>
Date:   Thu Oct 20 13:03:20 2011 +0200

    make sure profile_data is not shared between profile sessions

commit bda5f8e8ea726539c61123fa5e6ae3ce741cc190
Author: kares <self@kares.org>
Date:   Thu Oct 20 11:36:14 2011 +0200

    refactor profiling internals (preparation for better Ruby runtime profiling for envs that setup a non-global Ruby to be profiled)

commit b8181cda909f6e42d7c0b7fffaabbe2a502f273b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 02:19:54 2012 -0500

    Inline all calls to ThreadContext.getRuntime to access the field.

commit cfbb5d2c5190f36d87c925d3f77d08b63559009d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 3 18:14:20 2012 -0500

    Use caller backtrace logic to make warning file:line accurate.

commit 7c3f6426eb26e560f21b2f1905923fa624c4408c
Author: Subramanya Sastry <sss.lists@gmail.com>
Date:   Thu Jun 21 23:43:39 2012 -0500

    HEADS UP!  Removed all trace of setWithinDefined and isWithinDefined.
    
    * Tested on rubyspecs in 1.8 and 1.9 mode -- AST, JIT, IR.  No
      change in failures after this change.
    
    * Removed this from AST interpreter, JIT, IR
    
    * setWithinDefined was set by all of these before entering defined?
      checks and cleared on exit.  isWithinDefined was only used by
      RaiseException to decide whether to set $! or not -- effectively
      $! was not being set for exceptions raised by code executing
      by the call tree rooted in the defined? checks.  However, this
      resulted in buggy behavior because this call tree could do a ton
      of work (including loading files, requires, setting up classes,
      etc.) any of which can raise exceptions and might have to be
      handled, which require access to $!.  The workaround in IR and
      AST interpreters was to set "$!" whenever an exception was
      received (effectively bypassing the condition that RaiseException
      was guarding).  But, since I removed both these hacky checks as
      part of a previous commit (20632af6e1fa511fd9b762beda2a60d39bf3c859),
      we had code failures in Rails (bug JRUBY-6705) because of files
      not getting loaded properly. So, given that isWithinDefined is only
      used by RaiseException, which was anyway getting bypassed, there is
      no reason to keep that check around.  Once I removed that check,
      since there was no other use of isWithinDefined in the codebase,
      I also removed setWithinDefined, which led to a bunch of dead code
      which I purged.
    
    * NOTE: JIT is probably yet to remove the $! hack that I removed in
      the other commit.  It would be best to remove that hack as well
      so we know for sure that these two commits are working together
      well without bugs.

commit 30a76a7b2c03cf03a7f24fa062dade2258eeee4f
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 14 13:30:10 2012 -0500

    date strftime micro-opt 2/2.  Only one date format is usable per thread so cache out formatter in thread context (+300% more past opt 1/2)

commit 16b296350561e4dfed25c1eeb5a8836860b6e545
Author: Subramanya Sastry <sss.lists@gmail.com>
Date:   Mon May 7 15:34:25 2012 -0500

    [IR] First pass implementing an explicit call protocol via IR
    instructions -- for now, only bindings are explicitly managed for
    non-closure and non-eval scopes. Frames, etc. will come later.

commit 3d370fcf86e827c71593cf35dab7ceb465f9fc0f
Author: Uwe Kubosch <uwe@kubosch.no>
Date:   Sat Apr 28 00:11:58 2012 +0200

    * JRUBY-6626 Ensure thread is set on finalize

commit daed10cb5d4b2a02edbb670553fbc5c1e314e82a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 12 10:33:36 2012 -0500

    Deprecate now-unused ThreadContext.setFile

commit 0b167802678933b8c7346a043287a6210d9bab41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 11 17:32:10 2012 -0500

    Fix root-level backtrace mangling caused by old-style logic.
    
    Backtraces are not managed by file and line fields in ThreadContext
    anymore; instead, a new backtrace element should be pushed in each
    case (updating a preallocated stack of BacktraceElement objects).
    The old logic was still being used to set TC.file and TC.line
    before pushing a Frame...a relic from when backtrace data lived on
    Frame and pulled file/line info from the "current" values in TC.
    The continued use of these methods meant that backtrace elements
    were being updated in-place rather than pushed/popped for
    top-level backtraces, mangling them and destroying the proper
    values (ending up showing the last-set filename for toplevel).
    
    This commit removes all uses of setFile/setLine that are not
    performed against a backtrace element owned by the calling
    context.

commit 94ab8569cddbc3604bc3e95f089c004ac79c7167
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Mar 15 09:03:06 2012 -0500

    Dead methods we should try and get rid of on TC

commit f3000e958666c5ae3236226b264d53f2fbe6b465
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 6 12:28:51 2011 -0600

    Minor JavaDoc cleanups, to appease IntelliJ.

commit 5e138533042b8884cba634c80064fd26f10188fe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 17 16:05:55 2011 -0600

    Remove class name from backtrace data.
    
    Class name was only used for Rubinius backtraces, which nobody is
    using. JRuby's default backtrace is now very similar, so I've
    removed the Rubinius format completely. Also, for JRUBY-6218, we
    regressed on interpreter performance because class names are no
    longer cached. Also, in compiled Ruby code, the class names are not
    available most of the time. All this combined to convince me to just
    remove class name from the backtrace data.
    
    The "rubinius" backtrace style setting still works, but does not
    change anything (just uses the "jruby" style).
    
    This fixes the perf regression for the interpreter, but does not
    do anything to generally fix the regression for Class/Module name
    calculation performance.

commit 8aafe9b4bc98f7a9c007564fcfe1aa3e9f2347c4
Author: Subramanya Sastry <sss.lists@gmail.com>
Date:   Mon Nov 14 09:00:30 2011 -0600

    [IR] Got rid of duplicate call stack maintained in the IR interpreter
    and used the call stack in the runtime to detect local jump errors.

commit f592cbbfae1186c42fb9e0545e2d9c394e73312f
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 10 16:42:24 2011 -0500

    Use factory for standing up static scopes

commit 4807459e7a2458de246cb41104075c10c5d0fafb
Author: Subramanya Sastry <sss.lists@gmail.com>
Date:   Mon Sep 26 13:54:42 2011 -0500

    * Added allocation methods to StaticScope to allocate the appropriate
      static scopes and protected LocalStaticScope, BlockStaticScope and
      EvalStaticScope constructors.  This will now let us allocate
      IR-specific static scopes that IR execution requires.
    * Also added isBlockScope test on StaticScope to eliminate instanceof
      tests against BlockStaticScope and LocalStaticScope.
    * Hand-patched auto-generated files Ruby19Parser.java and
      DynamicScope.java.

commit 0abdd839c17e79d479b06fbd0207e6143add0656
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 24 02:13:41 2011 -0500

    Refactor Fiber support into threaded and coroutine-based.

commit f31ddd479011c67f14efaad9733bc16a24b877d4
Merge: eef82e7 72ce56a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Jul 28 13:02:53 2011 +0900

    Merge branch 'master' into autoload-threadsafe

commit bdab78d7612ecf49e11eec556b002efc59d4c644
Author: Douglas Campos <qmx@qmx.me>
Date:   Fri Jul 15 02:16:38 2011 -0300

    org.jruby.runtime.* loggers

commit 6f159fe5dd51c062a5b1aab64a8ede916990877a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Jul 11 03:36:17 2011 +0900

    Deprecation of fast constant access paths.
    
    Each os those has the same definition as non-fast verision.

commit fbc85d9466d8b5fc5482cf168828def9a8e0356f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 27 15:27:15 2011 -0500

    Fix JRUBY-5883: Hash Subclass#== not respected when checking equality of collections.
    
    * Make the Set used for recursion detection into a thread-local
    * Use actual dyncall for elements rather than short-circuited Hash/Array logic

commit 1ce656fb06e60fcddcf44e3041dc71ed02dc20e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 16 20:13:33 2011 -0500

    Add logging properties for exceptions, backtraces, and Kernel::caller invocations.

commit 28414b798c52fe21e1b838c35d5c4da1fa4ecdd4
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Jun 7 16:56:04 2011 -0500

    Fully implement Fiber.current and Fiber#transfer
    
    Fixes JRUBY-5842 and eliminates the majority of fiber-related rubyspec tags.

commit 3b21ec5f20ab1f411f3fc51e82fe6895df924190
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri May 13 09:50:03 2011 -0500

    Trivial: Remove some IDE warnings

commit ff1ec4932a80fd781021ea29fa4dd4d5b815d4c3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 24 22:45:45 2011 -0500

    Fixes and support code for JRUBY-5596: Improve Dalli IO performance
    
    * Disable backtrace generation for EAGAIN, which is usually used to retry a nonblocking read.
    * Provide a flag to force all Errno (EAGAIN specifically) to generate traces (for debugging).
    * Add a Runtime MBean to monitor exception counts, backtrace counts, and caller counts.

commit 4fbbfa53605225ade660e8c15388fc7590b6f2ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 1 15:05:44 2011 -0600

    Refactor backtrace generation logic.
    
    * Move out of inner classes into org.jruby.runtime.backtrace package
    * Add new BacktraceData struct to delay trace-mining until actually needed
    * Add new CALLER Gather type

commit 189ce1acdec3de30358285577cbef8f6c9594132
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 28 16:16:57 2011 -0600

    Multiple fixes and improvements for backtraces and Kernel#caller
    
    * Fix JRUBY-5434: Random "Detected invalid array contents due to unsynchronized modifications with concurrent users" with Rails 3.0
    
    Logic in backtrace generation was attempting to "eat" synthetic calls generated in JVM bytecode by walking further back in the Java stack until those frames were consumed. However the JVM often crops exception stack traces, sometimes causing cropping while doing this "eating". There were no checks in place to guarantee we did not walk off the bottom of the Java trace in such a situation.
    
    * Reduce (slightly) the expense of Kernel#caller by replacing Java lines with previous Ruby frame duplicated *during* gather rather than after.

commit 527be7924f6507d012871a16617f0923396c0e2e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 15 18:17:14 2011 -0600

    Fix JRUBY-5471: private method `verify_mode=' called with Bundler, net/https, jruby-openssl and RubyGems 1.5
    
    The problem here was that the extension loaded with the requirer's frame stil present on the stack. If the requirer had set visibility to "private", frame-sensitive methods like attr_accessor would use that for the method visibility. In MRI, extensions are most likely given a fresh frame in which to execute. We did not see this before because most core JRuby methods used to be framed (like Kernel.require) and so extensions implicitly got a clean environment.
    
    The update to RubyGems probably exposed this bug (likely present in RC1 as well) by setting OpenSSL attributes where it had not done so before.
    
    The fix is to push a fresh frame before loading extensions, so they execute in a clean environment with public visibility default.

commit f46bca69c45b01ad3d000b3116db93459337162a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 15 18:16:44 2011 -0600

    Cleanup some remnants of the old backtrace logic.

commit 55dcaeb3223f50855a184fbf3a1a09ad7dd4e5e1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 14 09:15:39 2011 -0600

    For JRUBY-5504, use Ruby method name in backtrace lines from .java core class impls.

commit 67b5fb8dad01d36615f91a6cc8971e9599a125e9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Feb 12 05:12:35 2011 -0600

    Fix JRUBY-5477: Caller stacks now include AbstractScript.java
    
    The new backtrace logic was unconditionally letting frames with a method named "__file__" into the Ruby trace. When jitting methods with restargs, many calls end up passing through AbstractScript.java's generic __file__ implementations that redispatch to the IRubyObject[] form. These two situations combined to allow AbstractScript.java to show up in backtraces after a method had jitted.
    
    The fix is to exclude backtrace elements that have a method named "__file__" if the source filename ends with AbstracScript.java. This should cover all non-Ruby instances of __file__ and fix the original issue.

commit 80ab30ab0b855ac95cee3476c6ce1666a293854c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 05:26:02 2011 -0600

    Fix JRUBY-5363: Kernel#caller behavior is different for files with .rbw extension
    
    * Add __file__ method name as a marker for compiled Ruby. Probably should make __file__ call a $RUBY$-marked method instead, but this is fine for now.

commit 2225f2cb21c337153efc2ec4cfa1b2f2b33c25da
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 25 15:08:17 2011 -0600

    Fixes for JRUBY-5229: Interpreter is slower for microbenchmarks after "backtrace" merge
    
    Several minor changes made to reduce the perf difference from previous versions:
    
    * Eliminate interface dispatch to get file/line for method/block dispatch
    * Eliminate virtual dispatch for backtrace push/pop/update
    * Eliminate comparison to "invalid" position

commit d554d36aee91e068d50d64073225fc2b1620a734
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jan 20 14:09:29 2011 -0600

    JRUBY-4951: 1.9: Thread#backtrace should apply to the thread in question

commit 5fc85736e73b197861e27164e58cf71022a9f29d
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Sat Jan 15 14:51:30 2011 +0000

    Profiler: Ruby API works with profile block and start/stop options

commit 20ff6278cc74d368d58276e00804c9f8c445ec1a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 13 18:43:11 2011 -0600

    Fix JRUBY-5322: NPE forcing to compile a script
    
    * Refactor backtrace style into TraceType enum
    * Move raw/full/ruby backtrace-gathering logic into TraceType
    * Move MRI/Rubinus backtrace-printing logic into TraceType
    * Fix Main toplevel exception handling to print using TraceType
    * Fix force-compile errors to render better and fire correctly for top-level scripts
    * Fix failed script compile to bail out, rather than NPE
    * Refactor Main into cleaner pieces

commit d7b838d61660f300db6f080b410ae472d6b2fc6e
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Jan 5 23:51:20 2011 +0900

    JRUBY-5044: removed unused private fields.

commit 1cda7a9156fce640d5c4418dec358e59b02c9c71
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Jan 5 01:51:43 2011 +0900

    JRUBY-5004: removed unused local variable

commit 7b96984afc343e4b8e2fdd5205a30b24d26a9006
Merge: d2575a7 0c5e9d7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 17 17:53:55 2010 -0600

    Merge branch 'master' into danlucraft-master
    
    Conflicts:
    	src/org/jruby/runtime/ThreadContext.java

commit d2575a71f38b702a110d86d21910db42a1597b2f
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Fri Dec 17 09:18:09 2010 +0000

    Graph profiler: refactorings to allow for printing profile data from Ruby code (doesn't work yet)

commit 74e6ef3298918929db9b792d23ae2578b6736a90
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Fri Dec 17 08:42:30 2010 +0000

    Graph profiler: Clean up references to dead classes

commit be3ab5a5846f1087a83d9f7d43d9370558bdaab9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 16 14:53:21 2010 -0600

    Fix __file__ toplevel trace for force-compiled loaded files.

commit 2da2d00c5101234b71194a58e0cbdd290264e71a
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Thu Dec 16 09:00:26 2010 +0000

    Graph profiler: added --profile option which creates ProfilingCacheEntryFactorys but doesn't do any profiling yet

commit e028009b0ce65437e29ca4b51b8a9ebd545be11c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 14 13:14:44 2010 -0600

    Look for __file__ method in AOT backtrace elements, to get toplevel frame. Fixes broken cases for require_relative.

commit c96b4df08b5022c69fa484b8579bfe66f29c8c28
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 13 23:29:11 2010 -0600

    Remove unused or non-useful backtrace styles.

commit a46ffc9191e9273454b7e10b7a4888793edc9f4f
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Sun Dec 12 21:08:14 2010 +0000

    Graph profiler: sort the table by total time, and recursive calls don't count to the timings.

commit 815ee7bce277f1c71341ffe59bc77b77cc352929
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 9 16:54:03 2010 -0600

    [1.9] Fix remaining language/catch specs.
    
    * throw uses object identity rather than equality to find matching catch

commit 62ecad3bed149fee9e993578b4decf0d78a91947
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 7 22:50:41 2010 -0600

    Fix JRUBY-5221: jruby.reify.classes raising error with optparse
    
    The problem here was that the class in question (OptionParser::Switch) had a no-arg "pattern" method on both the object and the class. When generating reified Java methods, this caused an error, since it is not allowed to have both a static and an instance method with the same name and signature. I fixed it by giving priority to the instance method, since normally those will be the most important for reification (for interface impl, etc).
    
    * Prefer instance methods when name+signature conflicts with a static method
    * Move jitted code to rubyjit top-level package and reified classes to rubyobj top-level package
    * Add some debug logging to reify logic

commit 5cb84d60e2e0e068681fbf49647ec853ce573b4f
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Sat Dec 4 14:16:31 2010 +0000

    Graph profiler: Store parent and child times and counts

commit b1d52a4ac0a0b9f770f324fc1f27b7627727d730
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 2 16:59:28 2010 -0600

    Remove compiled backtrace logic, no longer needed.

commit fb162687b7b352b1e84a44edf086d0e2601d0244
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 2 05:07:47 2010 -0600

    [1.9] Kernel#catch and throw can accept any object.

commit fd0fa789b21b30f294e8286b72b75fe3b688c27a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 1 12:07:42 2010 -0600

    Merge "backtrace" branch to master, now that it runs clean on all our various test cases.
    
    This is a squashed merge encompassing the following commits from "backtrace":
    
    commit eb0e24242050199ac1cc4cf6e48d93025f0186f4
    Merge: 32137de ea48d8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 12:03:28 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
    commit 32137decc9351dd7b6a19c49c7955808f535bb9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 09:41:29 2010 -0600
    
        Fix remaining failures for test-all.
    
        * Disable CheckClassAdapter temporarily, since it disallows what should be valid JVM identifiers.
        * Use the presence of $RUBY$ in method name as an additional indicator that we're processing a compiled Ruby body during backtrace gathering.
        * Move some largely-static properties out of "init" target in build.xml, so they're available whether init is triggered or not (e.g. run.jvm.model).
    
    commit ee2a624201d5e9cd408d6ae793160aeb99b50b3d
    Merge: cd50ae5 88ad204
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 08:01:22 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit cd50ae5f06b95a2fffab6bc1f3a7419f478d0a52
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 19:15:07 2010 -0600
    
        Get remaining spec failure with -X+C passing.
    
        * Embed the actual Ruby method name into the Java method for block bodies, rather than __block__.
    
    commit 52bbfffcae1aed62bf4afcb692bed9725e4e1564
    Merge: 4ed7235 1aace5e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:37:15 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit 4ed723579101fffd8bfa73b30dc6e4e8991866f2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:31:44 2010 -0600
    
        Precompiled (AOT) specs *nearly* green.
    
        * Mark __method__ as reading frame "name"
        * Fix AOT-based stack trace mining logic
    
    commit 64e20aa939b5b9c6e41e0e9fe09039a0bb92794a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:50:55 2010 -0600
    
        Jitted specs running green.
    
        * eval needs to set method name into the binding, so it's there for "__method__" in the eval'ed code.
    
    commit fd442c0a815bcab9eb6c9aa1b71e1f8a260ee03b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:06:53 2010 -0600
    
        Interpreted specs green on backtrace.
    
        * Tagged some __method__ specs for which backtrace behaves like 1.9, which Matz apparently likes but was afraid to backport. Odd cases anyway.
        * Fixed method name for the block used to define_method.
    
    commit cedb27e430b422c1158f66b4dcc7769922433506
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 18:35:22 2010 -0600
    
        Reinstate deprecated java_to_ruby and ruby_to_java I removed, since it's still needed by some external libs.
    
    commit b48b17910de662b4e2d20ee8f4b5cc734eefc1ed
    Merge: f39007e 2ae4995
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 13:40:58 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubySymbol.java
        	src/org/jruby/runtime/CompiledBlock19.java
        	src/org/jruby/runtime/Interpreted19Block.java
        	src/org/jruby/runtime/InterpretedBlock.java
        	src/org/jruby/runtime/MethodBlock.java
    
    commit f39007eca676c1e6ec9f891ac63b7c5d907b0d1b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Nov 18 14:01:29 2010 -0600
    
        Start normalizing the method/class names generated into Java by JIT and AOT compiler, to wrap up the remaining spec failures.
    
    commit 76e42c4b4522dc87c066d20051d02d1e4005b860
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 20:40:33 2010 -0600
    
        Disable dynopt for now, to allow better stabilization on the main feature of this branch: frame elimination.
    
    commit d03099690df2e16d423e8b6a8969e0264983237f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 15:00:14 2010 -0600
    
        Encapsulate "coreMethods" hash in Ruby and add "bound method" logic to default (non-generated) class populator. `ant test-all` runs green now.
    
    commit ed7458f72bce55b11e5231f8e7b9d590c09ca53d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:46:43 2010 -0600
    
        Fix incorrect use of fastSetInstanceVariable instead of fastSetInternalVariable in FFI.
    
    commit f09626121b6a8bea6ab39a3c8ed3ccd69f56b505
    Merge: f780b97 e8ca689
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:15:16 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit f780b972b1f3e18f4c2608d9536e797a0845cd1a
    Merge: 25ab5d3 6967ea7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 09:04:42 2010 -0600
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/runtime/ThreadContext.java
    
    commit 25ab5d3d3f8c1fbf0fa334427b1485d322e83f86
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Nov 7 00:42:54 2010 -0500
    
        Don't do dynopt against calls that receive blocks; non-local flow is not properly handled yet.
    
    commit a4ad27056dcc3acf6bae0b0af7e618966d08a6dd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 15:22:40 2010 -0500
    
        Tag caller specs that do not pass with new backtrace logic (peculiar eval caller behaviors).
    
    commit eed8902084cfa06d4648935c1f70da57bf0c7a9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 00:32:59 2010 -0500
    
        More fixes to get specs and tests green on backtrace branch:
    
        * Hash#index was not being bound properly from RubyHash#index19
        * Range#min and Range#max need super, and therefore need frame = true
        * tc_owned is a bad test and fails on system like OS X where (for some reason) / may be owned by user
        * test_trace_func had been hacked for a bad class result (Integer, instead of Fixnum)...fixed that
    
    commit 9d9f94c30de76fa25e738e70e84ea09163eca5cb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 20:03:22 2010 -0500
    
        Fix Kernel#caller to replace .java lines with Ruby lines. Brings specs mostly to passing.
    
    commit de433c771830e95c54f8196453208f2b312191aa
    Merge: 3ffe1cf e25c58f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 17:40:02 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
        	src/org/jruby/compiler/impl/StackBasedVariableCompiler.java
        	src/org/jruby/evaluator/ASTInterpreter.java
        	src/org/jruby/java/proxies/JavaProxy.java
    
    commit 3ffe1cfba86f52ee96d89f3a1c352597f22f76b7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 27 01:42:06 2010 -0200
    
        Fix compile error I accidentally merged.
    
    commit b081253fb3cdf5141f7f0cf76d3f8546837d9f42
    Merge: fc3028d ad68e22
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 16:30:25 2010 -0200
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/internal/runtime/methods/DefaultMethod.java
        	src/org/jruby/runtime/ThreadContext.java
    
    commit fc3028d9da2750c9d1c394600ab8ee712388724d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 14:39:29 2010 -0200
    
        Add better description for class bodies in backtrace
    
    commit d796555494c2237116c7477c932fd96cd30d2e20
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 11:36:29 2010 -0200
    
        Clean up and add color to Rubinius backtraces.
    
    commit 012f5357ce649bd5a996211fe231f26097bf4f5b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:23:04 2010 -0500
    
        Fix classloader check to allow for compiled method handles, which use a no-arg constructor.
    
    commit 473d48aac6a5523304188d1d433e4c12df989b89
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:10:32 2010 -0500
    
        Improve Proc-binding-based eval position info by propagating block's position into the binding and through to the backtrace frame.
    
    commit bcfd16b519b145c9ee055db1592dfaced05b71a0
    Merge: 4902faa 5b49583
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 11:07:15 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyTime.java
        	src/org/jruby/runtime/ThreadContext.java
        	test/org/jruby/test/TestRubyException.java
    
    commit 4902faaf1678d5aecdef8b0b66f8ec78062aeec5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Oct 21 09:28:45 2010 -0500
    
        Fix badly-merged RubyProc.to_s19, missing opening brace.
    
    commit 69177d7098f9dc4ff9096d08eee25c0d8bb4f971
    Merge: 801e764 f895837
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 20 21:50:53 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 801e7641b8838a8ae8931a9c6dcc5cf050096c4a
    Merge: 0c60a89 dda4644
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:16:41 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyDigest.java
        	src/org/jruby/RubyProc.java
    
    commit 0c60a89aa746f286588b218681e9ad25b11318c4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:06:15 2010 -0500
    
        Only compile direct recursive calls when we haven't branched to another method body (e.g. for rescues) and we're not compiling a closure or class body.
    
    commit 18333fe82c808e8ed49eef898f19c86fa2d764b2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 17:04:13 2010 -0500
    
        Get 1.8 specs running green except for a handful of Kernel#caller specs (which don't expect to see .java files in the trace...not sure how to deal with that).
    
        * Fix another literal-block-calling path that wasn't using callIter
    
    commit 366740120ee76d8df3f977edc1727b60b2d4ad63
    Merge: b64390b 6b243a3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:35:14 2010 -0500
    
        Merge remote branch 'origin/master' into backtrace
    
    commit b64390b8cf0d2cb13e06d352969a093b5e86818d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:33:39 2010 -0500
    
        Remaining fixes to get precompiled mode passing all our tests. Still some spec failures.
    
        * Bump up permgen max for test runs
        * Fix stack-based scope initialization to not leave an unused nil on stack
        * Ensure compiled method handles properly wrap pre/post logic for dummy and backtrace frames.
    
    commit 96bd3cbde91fc505b37ee13cbea6ffa3e8690c58
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Oct 11 18:36:34 2010 -0500
    
        First fixes for backtrace branch in precompiled mode:
    
        * Add test-precompiled build target for running just precompiled
        * Eliminate extraneous toplevel scope being pushed for precompiled loads (because that logic is all in the generated "load" method now.
        * Add a new scope descriptor decoding path that properly sets up a toplevel scope
    
    commit 0ebbd6ac46c9ac04558f5200f980f26f798b9413
    Merge: fc387be ac455fc
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 6 21:53:18 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
    
    commit fc387befff57ada6c116b646a3dfb767cc926ee5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:57:58 2010 -0500
    
        Renumber arguments for consistency.
    
    commit bbc91d3c4039bf6c26ceffd4899dcaaeaa3d46d0
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:40:38 2010 -0500
    
        Fixes to get specs a bit closer to running green.
    
        * Move pre/post logic for Script.load into generated code, so it's the same everywhere.
        * Make pre/post-load push a frame, so top-level of a script is always framed
        * Remove break handling from non-literal block call paths in CachingCallSite
        * Make sure all literal block calls are using CallSite.callIter, which handles break
        * Fix a bad test in testCompiler that needed visibility tweaks and framing
        * Add complete doco for CallSite
        * Fix Kernel#caller to trim from top of stack instead of bottom
    
    commit 4e814a24d5b2ef1b6567a3076a463ff9d08e2a0d
    Merge: 91dc13a 3dbcef3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 17:43:30 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 91dc13a2f0b74bc1054d83378782416465ecc1b8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 01:02:48 2010 -0500
    
        Fixes to get test-compiled (but not precompiled) passing 100%.
    
        * Fix eqlInternal's RubyNumeric branch check if classes are equal
        * Provide file and line from all BlockBodies, so Proc#to_s can always use it
        * Fix rejiggered Struct#each and Struct#each_pair to call the appropriate internal version
        * Fix ruby_test's IO.new suite to not use STDOUT directly, risking that it get closed
    
    commit dc4af45352607ebb8a95d70befdcdb15c1111c58
    Merge: ec8bb7f 90275be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 21 09:52:10 2010 -0700
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubyDir.java
        	src/org/jruby/RubyKernel.java
        	src/org/jruby/compiler/ASTInspector.java
        	src/org/jruby/javasupport/util/RuntimeHelpers.java
    
    commit ec8bb7fc31d4acd4ebcb040f088e19fb427448e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 19 16:21:38 2010 -0700
    
        Remove frame = true from all core class methods, to reduce their call costs. A few remain for invokeSuper and methods that may still need frames.
    
    commit ec276b6ca0c6009702839b12d97664b9e52b1023
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 16 14:10:43 2010 -0500
    
        Eliminate RubyTuple use that snuck in.
    
    commit f80254100cfc17ac6eb558e465fc1fb9122c3ee4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 14 10:07:53 2010 -0500
    
        Special case a few immutable core types in equalInternal/eqlInternal.
    
    commit eb66c45145e4fd1f8c28e9a8c544114f034116e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 18:26:13 2010 -0300
    
        Performance changes for backtrace logic:
    
        * Back off using Java stack trace for Proc's to_s file+line, since it's prohibitively expensive
        * Move the Backtrace stack to being a fixed-size array of objects updated, rather than created, when a push happens
    
    commit 6f0ade5ab28946b8800431d3454d2e57fc0dbe19
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 11:36:07 2010 -0300
    
        Add generation guard around trivially-inlined logic.
    
    commit c4d8705217174580d35757dc85c5c646e980b57f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 06:18:38 2010 -0300
    
        Full speed ahead with a caching mechanism for calls from core classes. Only works for core class methods right now, but opens the door to expanding that.
    
    commit 5874abc01104f6c0f435f8ac4643ed0f77cf7cff
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 03:43:37 2010 -0300
    
        Localize some fields used in Array#include? to speed up the loop.
    
    commit 346245cd5e154574d14736cf4b9e0b4b98260d14
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 15:02:41 2010 -0300
    
        Allow passing a number of iterations to bench_quicksort.rb.
    
    commit b4687022a1f00d0b63838b1c9daf00753fcfa93e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 11:55:15 2010 -0300
    
        Fixes to get run-junit-compiled 100% passing on backtrace branch.
    
        * Fixed a couple tests that are too sensitive to core method line numbers or expected only .rb elements in the trace
        * Added a mechanism for procs to retrieve the most recent Ruby frame, for to_s purposes
        * Added comments for hybrid backtrace logic
    
    commit 15cd9b16cb2750d0e40ba478d07fe5bf265dc620
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 08:07:57 2010 -0300
    
        Add better logging to AnnotationBinder (for showing framed/scoped core methods), ASTInspector (for showing methods detected as framed/scoped and for reporting deopt flags as they are set), and JITCompiler (for dumping jitted methods' full classes and inspector results). New property jruby.jit.dumping=(true|FALSE).
    
    commit c4e6176498590d791868055025c2e72ded1ccf13
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 10 02:10:20 2010 -0400
    
        Improve dumping of generated bytecode by including class and method name when possible.
    
    commit 07fc4215f6873f449f89d4f5da7a7e2e8963bc70
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 9 23:39:20 2010 -0400
    
        Make attr accessor's var accessor field volatile, to guarantee visibility across threads.
    
    commit e3a7cf5cd4d8ccd08407955779bdd94feb5e4ac8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 13:26:48 2010 -0500
    
        Add missing "in" to caller backtrace lines.
    
    commit 7140c339f386959853f747d86cb2ea9a8afa6f2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 12:10:50 2010 -0500
    
        Fixes to get tracing tests running in interpreted mode:
    
        * Off-by-one line numbers were off for MRI too. Fixed to correct line numbers
        * call and return for Ruby methods need to use impl class, not self class
    
    commit cbc9c4edab56807a023817d06db9c22441fa4b53
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:31:57 2010 -0500
    
        Fix runInterpreterBody to properly unwrap RootNode for "gets loop" execution.
    
    commit 3a09773058d8d58d5bf8f1b6fbebc494fc18f7c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:01:43 2010 -0500
    
        Make --bytecode attempt a recompile, so that dynopt and no-compile modes can still print bytecode.
    
    commit 4e48e722ba5ded10975af348738237fcb7fe9b2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 09:23:38 2010 -0500
    
        Add a "full" backtrace style which does not omit any Java frames and interlaces the Ruby frames.
    
    commit 6f5057e3ae1e372bd66602dcc26864adc3270128
    Merge: 7006d31 811fd8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 07:48:47 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
    
    commit 7006d3175bbf4630921dfecaa4faef2a39a77205
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 16:04:28 2010 -0500
    
        Bytecode size reductions for stack-based nil-initialization of locals and for x, *y and x, * forms of masgn.
    
    commit 3a8fb16f020c2b9aaa6228605bdb3d8fd1b78ccf
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 14:52:04 2010 -0500
    
        Do not do direct recursive invocations for heap-based scopes, since the scope is not currently being reset.
    
    commit ec00e99636667eff97a891917ae9ef37f94a6eb7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 3 19:55:24 2010 -0500
    
        Turn on dynopt by default, to aid testing of new logic.
    
    commit 9508e8a6925fce4f57a386ede867b3f8f9b67d38
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 2 12:40:38 2010 -0500
    
        Fix Time test that expected two separate Time.now objects to to_s the same.
    
    commit 65ba8b37a8a232495453e71b2a560c761b40893f
    Author: Nick Sieger <nick@nicksieger.com>
    Date:   Mon Aug 30 14:50:03 2010 -0500
    
        Use new backtrace info to set a more useful Java thread name
    
    commit 75b100604af39de52b26bdb21669136234424a0b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 30 11:37:49 2010 +0900
    
        Fix ifne/ifeq bug in dynopt guard and switch DefaultMethod to not flip generations on JIT in dynopt mode.
    
    commit fe3b408629e94b7db0436152968bd6d2232f6c7c
    Merge: eea60da 85c64c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 29 20:33:06 2010 +0900
    
        Merge branch 'master' into backtrace
    
    commit eea60da3905c87c16fbb4e6c78fd7a07f842e4bd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Aug 27 14:09:44 2010 +0900
    
        Modify Java Fixnum fib bench to use the long call paths where possible, to be more like what compiled Ruby does not.
    
    commit a189563d9073208292e91aff3eb1c88489bd113d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 15:07:21 2010 +0900
    
        Fixes for jitted/compiled backtrace generation
    
        * SClass in a method body needs to frame, so it has a jump target for non-local return
        * Compiled methods need to always have their ruby name in the method name, so it can be mined out appropriately
        * Synthetic calls, like to rescue bodies, need to gobble caller frames to avoid multiple entries
    
    commit 276226de611cb8d5af942148109c2a51982e7640
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 14:03:44 2010 +0900
    
        Add callNumber tracking to method handles, to properly handle return jumps.
    
    commit b94bcf119a54f52ab9be3c86bc5cc85078f20eee
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 13:16:25 2010 +0900
    
        More fixes for hybrid backtrace:
    
        * Get generated trace to be RaiseException's Java trace
        * Add Ruby exception name to the RaiseException message
        * Rewire and repair trace calls
    
        All main suite tests now pass in interpreted mode.
    
    commit dc9fcd3de0f3070507ac0a0647973d1e9f16ae4f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 14:38:47 2010 -0500
    
        Fix debug logging of exceptions being raised and patch a couple tests for new backtrace structure.
    
    commit 3acd3201d85e4da9186fa17d3a04bdc9db742e29
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 13:23:04 2010 -0500
    
        Include original source file in compiled Ruby, add missing "in" line for MRI rendering, and soften requirements in test_backtraces to allow for native elements in the backtrace.
    
    commit 728cf3983fbeffba944fe34a8b0e410cc1de041c
    Merge: 88a64de 0e9c956
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 00:18:07 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 88a64de879446be3398ba7671b5fa1f3e46ce02f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:29:21 2010 -0500
    
        Turn on "positionless" compilation, since compiled code no longer needs to update interpreter backtrace frames. Also fix nil/null backtrace rendering.
    
    commit 5712a4ce285a5b3662c8ef8def2599223a232626
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:18:17 2010 -0500
    
        Fix off-by-one line numbers from interpreter frames.
    
    commit 519f4625b9d9658f50b986b1add560903ee453de
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:10:47 2010 -0500
    
        Remove some old backtrace code no longer in use and get all "backtrace" method handles to generate with no frame at all (since Java stack is used now).
    
    commit 424d967df8a3b6ba277bdb1b530d4f7f62ecbc4a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 16:52:29 2010 -0500
    
        Get Kernel#caller working with hybrid traces, get Rubinius rendering working again (partially), separate gathering and rendering of backtraces.
    
    commit a00822740712ddd924896feccc10f015fd20d4be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 15:32:08 2010 -0500
    
        Mine method names out of AOT and JIT compiled stacktrace elements and get JIT using the original name of the method.
    
    commit 039d184ac5f798aed21870a7552b66c5973ca0eb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 14 22:16:48 2010 -0500
    
        Simplify in-class encoding of StaticScope data.
    
    commit 876a762b8af88955bee598dfd0421805d9b47c40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 01:41:44 2010 -0500
    
        Fixes to hybrid traces to get tests working better:
    
        * Omit Kernel#raise and the KernelJavaAddons rbRaise from traces
        * Handle getBacktrace when there's been no preparation
    
        Also modified test/testException.rb to allow internal line numbers for the "load" call, rather than MRI standard "whatever line it was called from".
    
    commit 06f1bd171d6897f651b3cebfd76551080acbfe40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 00:39:59 2010 -0500
    
        Move backtrace management to a separate stack and implement mixed-mode backtrace generation.
    
    commit ca40e73a7c136dfdd3853f0cd62a73bf70a3a08f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 21 20:56:50 2010 -0500
    
        Get all major interpreter entry-points passing through simple, known method bodies. First step toward mixed-mode backtraces.

commit b9f508f08b183a2141a4c69f84090a150d2cf928
Author: Daniel Lucraft <dan@fluentradical.com>
Date:   Tue Nov 30 22:09:29 2010 +0000

    Add a --profile.graph option, and split ProfileData into FlatProfileData and GraphProfileData, though they behave the same currently

commit 0e0ffe2e5c18927119cb9cd45764f935b9956dce
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 16 16:41:43 2010 -0600

    Create ContextAwareBlockBody to Dry up common blockbody code

commit 6cabc8fb6a510545419554de8f9e48ab0d9de2c0
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 4 17:54:06 2010 -0500

    Madness to go this long without committing

commit e8ca689d219676d9d718a37542430ff02117e25f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 17 09:07:09 2010 -0600

    Remove bunches of unused imports. Ought not NetBeans do that for me when moving an inner class out?

commit 6967ea779bf63c29f5a27f84bcc6d74401323003
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 17 08:55:42 2010 -0600

    Move ProfileData out of ThreadContext and into its own package.

commit ad68e22591727ba1398e9bb07229cea877ebc365
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 16:08:22 2010 -0200

    Add dividing line under profile headers.

commit 987b709d1e35a18d158e2ede630d76a1e699bcc9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 16:02:47 2010 -0200

    Fix bogus Object#initialize time in profiles due to startup "chunk" aggregating at 0.

commit 513ee132568c31759221b1ae93ddef6f936b16ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 14:29:29 2010 -0200

    Improvements to profiler:
    
    * Add aggregate times and missing ProfilingDynamicMethod class.
    * Clean up code
    * Improve printing of singleton classes and included modules

commit c3d5654084f57ff805904ff43c90e81ef47094f2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 14:24:30 2010 -0200

    Add aggregate times to profiler.

commit 80cc87dcb82c885dc4d5da9e85e70424dbb305ab
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 13:23:10 2010 -0200

    Fix logical error in method count tallying.

commit aabfa79f434ef5ad491b708ae1cefb65458ff29e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 13:07:25 2010 -0200

    First stab at a basic instrumented profiler. Needs update of jruby launcher to pass --profile through.

commit 97934049450ddb1756d4e41e5060e39bcf628a77
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 22 18:29:16 2010 -0500

    Fix for JRUBY-5086: jruby should output more full of a stack trace in 1.9 mode

commit a620dd1d367f02546787ccd23532b76987bd72e1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 3 18:18:04 2010 -0500

    Modify backtrace generation to happen closer to throw/raise time rather than on construction. Preparation for better native+interpreted hybrid traces.

commit 5deb7c6e9432d2b1f70c819503a538f391dfab59
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jun 11 00:41:54 2010 -0500

    Revert initial frames size to 10 to reduce thread-spinup cost.

commit e373c01f64dc8cd4f29517e6d56e8a4db9a90177
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 20 16:08:50 2010 -0500

    Eliminate the often-unnecessary getRuntime and getNil from the preamble of compiled methods; brings us closer to lightweight or do-nothing methods inlining away.

commit a4d33150bc3d1d31ac8bd3b0cd7b68f9b3d889d6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 2 14:32:37 2010 -0500

    Final fixes and test for JRUBY-4264: threadContextMap leaks RubyThread on death of adopted thread

commit e05b969291d44e3d42e14861e30ce189a52f1b5f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 2 02:09:26 2010 -0500

    Miscellaneous cleanup:
    
    * A number of findbugs items in the "threadsafe", "performance", "malcious code", and "experimental" warnings
    * Tidied up all NetBeans "yellows" in the files I touched
    * Removed now-defunct JRubyServer/Client/Service
    * Removed now-defunct ssa.rb and DAGBuilder

commit 93b1257dad9a3915c6c6374d71d7c51e1dd9c460
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 17 12:13:28 2010 -0500

    Revert "Fix for JRUBY-4484: jruby -rtracer doesn't trace"
    
    This reverts commit 5f3de424615189193a722d754189a143b40cf6ed.

commit f391828d92e2bc785d8d6717b81672c794469a70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 18 03:21:29 2010 -0600

    Remove instance_eval hack that snuck into an earlier commit.

commit 26f5d63fd59fd3385258664ad862909189902e38
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 18 02:58:19 2010 -0600

    Fix for JRUBY-4531: java_send for static methods

commit 5f3de424615189193a722d754189a143b40cf6ed
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 17 13:50:05 2010 -0600

    Fix for JRUBY-4484: jruby -rtracer doesn't trace
    
    I modified how toplevel bindings were prepared when libraries are required with -r. tracer.rb depended on caller(0) being one-deep to know when to install itself. Minor fix, fragile use of caller, but at least it's matching MRI behavior now.

commit d9835f8206575ab180894d51e433e016485b3387
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 18 22:50:27 2010 -0600

    Interpreter fix for JRUBY-4497: return in eigenclass definition is not working

commit 3849128d6ab797ecef79db8786ac8bcea11fbbf3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 12 09:35:07 2010 -0600

    Reduce bytecode size by packing all basic cache initialization into a descriptor string that's parsed on load.

commit 3587b5568a35e5b1b2e6fade9365d8b329a0b912
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 10 17:32:24 2010 -0600

    Replace the JumpTarget class with an int wherever it's used, to help ensure it will be unique (within a given thread). Also includes a replacement of catch/throw logic with "one-shot" callcc logic to avoid the need for ThrowJump and JumpTarget in catch logic.

commit cbe7b2b79086f8818bee2e14109207c902fcb3bf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 10 14:58:12 2010 -0600

    Fix for JRUBY-4262: Weird Proc test makes JRuby to skip the rest of the tests completely

commit c6090f11f65aac41e73e3507d0a7766acea91a00
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 2 14:16:50 2010 -0600

    Minor improvements to reduce the cost of constructing a ThreadContext.

commit 25720ab186b2d0fcdeffc1744128e185bf575a6b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 11 12:12:17 2009 -0600

    Fix for JRUBY-1531: Tracing in compiler / Tracing AOT compiled code
    
    This adds tracing calls to the compiler output and compiled-method invokers whenever full tracing is enabled. This allows debugging at nearly full speed, though to support bindings DynamicScope optimizations (elimination, for example) has to be turned off. This patch modifies --debug to no longer turn off compilation nor turn on reflection, and test/tracing/test_trace_func.rb passes in all modes.

commit 888e2f97c391b6050358c35f7b808ac13cfb9ec2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 2 17:43:00 2009 -0800

    Remove a volatile modifier from inline cache and start reducing guard-checking to all static calls.

commit ce4379c72e52cb7847f832653afae06f6674ac82
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Oct 16 15:58:58 2009 -0500

    JRUBY-2816: Turn off debugger events generated from non-user threads
    
    (stream pumpers from system calls in this case)

commit 7115cb6a7d37e735d8dcb6618f99aefb750e772e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 6 16:16:32 2009 -0700

    Switch --fast to use RUBY_COMPILED backtrace generator and fix RUBY_COMPILED to search all frames.

commit f1d52141790354504726ebd8a12bb4de8355e7bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat May 30 13:52:09 2009 -0500

    Include construction-time backtrace frames when creating a thread, for better in-thread backtrace context.

commit 32100c7038ec6a49db60a75e15d01f97b7d3a3de
Author: Nick Sieger <nick@nicksieger.com>
Date:   Wed Apr 8 00:38:23 2009 -0500

    Send USR2 to a JRuby process to receive a Ruby thread dump.
    
    Currently only a single runtime is supported; considering options
    going forward for dumping all active Ruby threads across runtimes.
    
    - Need to dupe frame in order to preserve initial line:number
    - Remove err.println from RubyRunnable
    - Track thread contexts in thread service, move thread dump signal logic to RubySignal

commit 1d1e533478528a727fbcc9ea6924e6f33422cb03
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 23 21:50:03 2009 +0000

    Kinda hacky fixes for exceptions thrown from toplevel; backtrace isn't great, but it isn't NullPointerException. Should at least improve JRUBY-3439 and JRUBY-3345. I will leave the latter open to continue fixing the trace.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 99f983249e106d4153d4d7421f9feeacfaff6af8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 13 23:04:16 2009 +0000

    Rejigger how binding works with files and line numbers. It appears that we weren't tracking everything we needed in a binding. Instead of holding the current frame plus the current file+line, we held only the current frame. This led to us constantly setting and clearing the frame's line numbers in an attempt to get traces to line up. With binding carrying the original file+line, that juggling is no longer necessary. This fixes an eval spec and should improve backtraces across eval calls, which had numerous peculiarities before. This also fixes JRUBY-2328: Overriding require causes eval to give wrong __FILE__ in certain circumstances.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9140 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b585f5861b8313d080269e7ff6961dc89213d522
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 12 09:02:37 2009 +0000

    Fix for JRUBY-3397: defined? CONST is not following proper constant lookup rules
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9109 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d5917ab017873fd1aca4fb008d9db98238cd1062
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 6 01:54:23 2009 +0000

    Implement 1.9 Kernel#caller and require_relative (plus other 1.9 prelude stuff) in preparation for 1.9 tests.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9039 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff05798b7b8c7eda477a425723faf3570942cc16
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 10 18:54:56 2009 +0000

    Feeling saucy today...reimplemented Thread.critical= in terms of a single, shared, global lock. I want to see if it breaks anything for anyone. I doubt it will.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8695 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 45b04e1b7a8ff07dee9a79bc911bd22899b3a2ef
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 06:51:55 2009 +0000

    --fast updates: non-zsuper super also needs frame (duh, for method name and current class) and removed frame-cropping from raw backtrace for now (since it cropped too much in some cases).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8608 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9b6165d33ba04fac71936a3834cec72589740fcc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 5 13:37:09 2009 +0000

    Add RAW backtrace to --fast mode, so there's at least *something* for now. Will eventually clean this up a bit more.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8601 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 91799eaaaf58ee72283b41330e3941b4753ed4e7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 5 07:12:29 2009 +0000

    Large refactoring of CallConfiguration and compiler logic pertaining to it:
    
    * Made CallConfiguration an enum, aggregating new Framing and Scoping enums
    * Juggled all references to CallConfiguration to be appropriate for its new enum status
    * Reduced and simplified logic based on CallConfiguration in compiler
    * Added remaining permutations of framing and scoping to better support proper execution in frameless mode. With these changes MRI's test.rb runs green in "fastest" mode.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8594 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 216f71a3ed589f126c32fd537415422fc6edb144
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 3 00:07:09 2009 +0000

    Update to latest specs:
    
    * Fix a number of Thread#raise behavioral issues exposed by new specs
    * Fix an old private method spec by invalidating cache on visibility change
    * Moved errorInfo into RubyThread object so it's accessible from outside the thread
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8572 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff9baab4ad2d88d6b41bf0cd0d789463d53b9bd7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 2 04:22:19 2009 +0000

    Optz for class/sclass/method bodies, to get the usual variable optz and reduce per-entry cost due to recreating the scope.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8555 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bdbe0ee70a906fe3e911b6431aa13f5207bcb41b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 15 14:58:15 2008 +0000

    Minor tweaks
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8344 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df7caff252cf10edd9857f934a580947880803a2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 1 20:20:57 2008 +0000

    Fix for JRUBY-2948: Exceptions do not cut off at binding evals after change reported in JRUBY-2945
    
    This problem arose because I had nowhere to stick the "binding frame" flag on StackTraceElement, and so had to disable the trace-shortening logic that cuts off backtraces at a binding/eval frame. My fix was to create a new type RubyStackTraceElement that wraps StackTraceElement and includes a field for "binding frame", allowing me to reenable the cutoff logic. Traces in e.g irb look fine now (clean, short), and I don't think I added back a whole lot of overhead.
    
    Stacktraces are still a nasty bit of code that needs to be revisited and replaced some day. Some day.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8234 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 98eef6f7837bc45d6c8c769d7915b128cd14f77a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 29 19:56:57 2008 +0000

    Fix for JRUBY-3093: alias plus eval plus module does not appear to be reflecting correct lookup hierarchy
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7945 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9478f12d861663dd29cbdedba197340470833437
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 26 22:24:34 2008 +0000

    Fix a regression in "binding" behavior: without framing, it started using the incorrect RubyClass, adversely affecting eval with a binding in a block in a class sometimes used for programmatic method definition.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7927 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3fc75aa4e0fb355b8781f073479fd053dd581599
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 14 05:06:11 2008 +0000

    Eliminate constant and class var dependency on heap-based scopes.
    
    This implementation degrades performance slightly for normal stack-based methods (fib goes from 0.33 to 0.37) but in exchange it allows methods with constant or class var access to also be stack-based. It is also a stepping stone; with this code working, it's now easier to return stack-based bodies to using no scope at all and having no pre/post logic.
    
    Also included in this patch is a change to evalScriptlet that forces each call to execute in its own scope. I've always been suspicious of evalScriptlet, and now I know why: it was adding variables to whatever scope happened to be on the top of the stack. Even worse, if variables were already there, it would reuse and potentially overwrite them. This behavior simply cannot be allowed, and my forcing stack-based scopes to use NoVarsDynamicScope exposed it. evalScriptlet must execute each call in a separate scope, and we should consider adding a new version taht can take an existing scope.
    
    Note also that TestVariableCreation, which depended on evalScriptlet's broken behavior, has been removed.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7698 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e275166475540e7663a5c6830e9a7bea5e564961
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 7 22:44:43 2008 +0000

    Outlining logic showing up as "too big" to inline during logged bench_string_ops run.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c90bb419f24be19bc57c841b8a56a51bcd599efd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 26 22:11:35 2008 +0000

    Some compatibility improvements to the new "fast stack traces" for JRUBY-2945. Hard to know if it's any closer to being correct though. Hopefully we can get a reduced case or confirmation from rvalyi.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7552 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9c752cd2437386828e2b20231c15e782fdb8e677
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 21 19:39:36 2008 +0000

    Fix broken Java-based backtrace styles.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7512 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c65fe38521030d5dbc4cdfa4fd509cfb8295073
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Aug 20 22:36:35 2008 +0000

    Change Events to be based on enum to better encapsulate line offset logic (path by Jay McGaffigan w/ mild tweaks by me)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7507 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3aff5728111e60207a7c705e5176818b0458fb88
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 15 05:22:15 2008 +0000

    Remove the (unknown) from Ruby backtraces. JRUBY-2923
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7470 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f98ba67aa5c9ce7c964749cdc373016865bfb505
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 14 06:22:40 2008 +0000

    Another minor tweak for StackTraceElement-based backtrace memo: use RubyModule.getName(), now cached and calculated only once per class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7461 961051c9-f516-0410-bf72-c9f7e237a7b7

commit efa13d3c340137eac012c7d8cac152a1d849bf78
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 14 06:02:58 2008 +0000

    Additional fixes for StackTraceElement-based RaiseException backtraces:
    * Add one to line numbers, so Java traces get the 1-based numbers
    * Construct the trace in Java's preferred ordering and iterate over it backwards when building the Ruby trace.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7460 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da81e492ffedfcaa2087a702c6cc46e24a631185
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 14 03:50:49 2008 +0000

    Modify exception construction to memoize frame details in StackTraceElement[] and not construct the Array+String-based backtrace until actually needed. Improves the performance of bench_rescue over 4x. Also, I had RaiseException set this StackTraceElement[] as its Java stack trace, so when it does escape JRuby (e.g. inside ScriptException) its trace will be the Ruby trace.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7457 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afa87ece3428efd5180fe97c52fbdecba237e853
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 10 05:35:28 2008 +0000

    Add specific-arity paths for method_missing; in most cases args will get boxed again by *args, but this eliminates at least 2 levels of boxing for 1 and 2-arg calls and 1 level of boxing for 0 and N-arg calls.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7419 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c1c85534290f1628d5314dd5ccb83fa932d4f62
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Thu Aug 7 04:42:32 2008 +0000

    Cleanup more low-hanging-fruit, this time in org.jruby.runtime
    - final fields where possible
    - deprecate unused classes
    - tag a few enum-like classes with FIXME to see if we want to convert to an enum
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7400 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 799d2fb47bff517a340fbc8714bf0d48441a1782
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 3 03:52:21 2008 +0000

    In Main.main, catch non-Ruby exceptions and display their backtrace formatted Ruby-style. One more step to hiding Java completely. Also added a Java integ enhancement for RubyKernel that allows throwing Java exceptions directly.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7354 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3de4f5f6f6d80c08618ed3fa02bbb70f0af5672e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 1 17:18:13 2008 +0000

    More cleanup for field access in TC and preparing for some improvements to backtrace perf.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7343 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 521e9e65ed94d12fa9e480c54acd00c2de7eaf13
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 1 09:02:33 2008 +0000

    * Various minor framing cleanups, mostly to eliminate passing nulls and default values that get ignored or replaced with others. No obvious perf difference.
    * Cost reductions for thread spin-up, largely by reducing default size of stacks from 50 to 10 but also reducing construction/startup overhead for RubyThread and the two ThreadLike types. Pooled thread spin-up now appears to be as fast as Ruby 1.8.6.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7338 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72907df91669fbcedfe7076f47bede07520cdd66
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 1 06:14:27 2008 +0000

    Speed up Kernel#caller, since I need to slow down exception traces for accuracy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7336 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0cca9e09815762560d6a7787d8927fc73ac70951
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 1 05:41:51 2008 +0000

    Add some experimental code for generating stack traces based on Java StackTraceElements. Most interesting is the "hybrid" stack trace which assembles a trace based on both Ruby and Java frame elements. Working almost 100% for cases I tested, but it's rather fragile. It needs a more robust mechanism for assembling the Ruby backtrace and for marking specific Java calls as being framed. Default is off for now, specify -J-Djruby.backtrace.style=raw (raw elements), raw_filtered (raw minus org.jruby.*), ruby_framed (classic behavior), ruby_compiled (only compiled ruby elements), or ruby_hybrid (mixed interp and compiled).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7335 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a17f82ce1f6b17a388c76dcacc55cf5effbc6384
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 7 05:20:06 2008 +0000

    [interp] make arity specific block pass nodes for call/fcall nodes
    Move TC.getContext impl into StaticScope
    Remove unused specific-arity in fcall/call nodes since new node types replaced it
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7114 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dd6961afadc591749d9f79edcb83ba8f788005bd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 7 03:31:44 2008 +0000

    Rework of how break and return handle jump targeting. Now all frames have a final jumpTarget field used as the target for the non-local jumps, rather than using the block body (which is static and breaks cases where the block is passed through multiple levels) or null (jump target will never be null now). For JRUBY-2756.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7110 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 69da32d5a45c75e369ff40e730ed5a095cf91c6e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 4 16:06:54 2008 +0000

    Fix for JRUBY-2753, wrong file in c-return trace from require or load.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7106 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d1eef47be27649a60fd5ac2e969ac6a5195375d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 3 19:05:05 2008 +0000

    Fixes for JRUBY-2744, reenable c-call and c-return tracing for native methods.
    
    I added back the tracing, but it's only enabled at runtime if you set jruby.debug.fullTrace=true because it introduces significant performance hit. --debug enables this by default, however. We'll need to look at unification of all debug/trace settings, especially since I think it's feasible to add tracing to jitted code now that there's a standard --debug flag we could use to turn such traces on.
    
    I also added a number of config params that weren't showing up in the ConfigMBean.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4056e6829a5bfc7213739a1656ad214f9cba2722
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 3 00:54:24 2008 +0000

    Fix for JRUBY-2729. No test provided, because I'm a big slacker. Maybe in a moment.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7082 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d062e280526a81c846cd05f3e89d24aa9dd61b5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 28 19:05:26 2008 +0000

    Fix for "leak" from frames holding on to object references after they've been popped. JRUBY-2712. The performance difference on e.g. fib benchmark appears to be marginal (0.31s to 0.32-0.33s), and certainly worth reducing memory footprint in cases where the frame holds too much.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7042 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a7b41d876cb677ba653a997002aa397613468d83
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jun 20 13:20:17 2008 +0000

    JRUBY-2682: Replace StringBuffer with StringBuilder.
    
    Patch by Wayne Meissner.
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7004 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ece48b471a9ff8afb0a62ca661cebcd0068f9a95
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jun 15 08:09:26 2008 +0000

    Revisiting a few methods that registered as "too big" to inline during method dispatch benchmark. Still a degradation after a few iters I can't pin down.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6979 961051c9-f516-0410-bf72-c9f7e237a7b7

commit de4b08c5f0654738756b8e8ccf68b6bfbb13313f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 14 09:12:21 2008 +0000

    A modification to binding-based frame push/pop to save the old frame object on the normal call stack and put it back rather than allocating a new one. Saves another 30% on minimal benchmarks.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6964 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9f86eb095a6cbedb8ceb2195201f4519757c9078
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 10 23:01:18 2008 +0000

    JRUBY-2456: Broken tracing for Kernel.load (patch by Martin)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6929 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e119e87ad914f57cf2461c64d74cdb3cdb10a0b6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jun 6 04:18:21 2008 +0000

    Juggling some conditionals in hot paths to come outside the call site, so call profiling can skip them entirely with a reasonable guard.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6905 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6542f3fe6b2893a0a6d4439f30f2d6565997d54b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 4 04:41:00 2008 +0000

    Remove some redundant code in getPreviousFrame.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6875 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 033585b004e2ed07e79d4763ceb0326bd09d7a6f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 27 19:04:53 2008 +0000

    Reverted change relating to JRUBY-2581, reported to be logging ReturnJump, possible passing through impl of Java ifc
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6833 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2a610b17d358c67afc087f27edcb45d3b2091f75
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 26 20:26:17 2008 +0000

    Return to thread-local ReturnJump, but do it right this time: private final, not private static final. Stupid me. Fix for JRUBY-2573.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6796 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a3681035650e0e1d9121448b2e9f6c11ab7380f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 26 20:26:04 2008 +0000

    Fix for JRUBY-2573, I hope. Hard one to get a test case for.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6795 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 93110714fccad467159edc240b3b04753df94437
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 23 05:55:29 2008 +0000

    Various optimizations in pursuit of less VM deoptz:
    * Support a straight-in path for zero-arity calling of compiled code to avoid an extra hop through DynamicMethod.call
    * Cache a single ReturnJump per thread, updated immediately before being thrown, to slightly reduce the cost of non-local returns
    * Add more specific/direct calls to the pre/post methods for Java/Compiled method, to avoid the polymorphic calls to CallConfig. Also make direct calls for interpreted code. JIT still uses polymorphic CallConfig.pre/post for now.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6754 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a7a787839f3233bdbc804181fdd555940a57297c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 13 22:04:04 2008 +0000

    Fixes for JRUBY-2267: clone frames always when constructing a binding, but don't clone on push and put backref/lastline in a separate structure so they can "float". Tests coming. This may also fix other backref/lastline issues.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6696 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c1a09e3d0edc83e01cb403b17a6f8928f2bfeed8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu May 8 23:59:00 2008 +0000

    Fix JRUBY-2489, handle backrefs more correctly by using frame deltas for grep.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6648 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8a3e1d18622ae2f4c61017cfbd65c58e612f658c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 6 04:18:53 2008 +0000

    * Add arity-checking to compiled method's handle, rather than doing it in every body.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6628 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5a5a6fb25a60e342e1059b316a5245be06d5e4c0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 28 17:43:07 2008 +0000

    Add a small method to compiled classes that updates file/line on TC at the same time. Reduces method size quite a bit.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 59ca34930cb08d32a9264d98865b0858cf1fb26b
Author: Marcin Mielyski <lopx@gazeta.pl>
Date:   Fri Apr 18 17:52:30 2008 +0000

    Remove RubyUndef and replace it by RubyObject.UNDEF static.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6533 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 938d2bc4df0811c89dd9b6d777a7da02b2bca5a3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 12 15:13:45 2008 +0000

    Eliminate unused Arity parameter from CallConfiguration.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6480 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fb0407433cda6be6a872f6eb63c9fb17a694e046
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 7 21:25:58 2008 +0000

    * Add specific-arity entry points to DefaultMethod, used when jitted; helps defray the extra cost when compared to full AOT
    * Remove "args" param from method "pre" logic, since it's no longer needed.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6426 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 260ac769de0e4d0162768ee430e9c4520a3be492
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 31 06:48:26 2008 +0000

    Fix for JRUBY-2344: move "every 256 calls" counter used for thread event polling into ThreadContext as a field.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6375 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2d7f322e6a432b15359ad5d4f93f0595772866d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 26 20:26:50 2008 +0000

    Partial fix for JRUBY-2328
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6346 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 514a2e68c3ec3a6a3a2b533de160af53683bc2a0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 12 16:44:57 2008 +0000

    Fix for JRUBY-2261 and an improved mechanism for cleaning up old RubyThread instances. Also a test to ensure we don't start leaking RubyThread instances in this way again in the future.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6179 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 852d904134ad970a20497fdcc5d752dd4ae49766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 7 22:04:54 2008 +0000

    The RC3 Surprise!
    
    Allow annotation defined ruby methods to optionally specify ThreadContext as first parameter
    Convert easiest and most common methods to accept ThreadContext when method or child method can use context
    
    These changes give about 15% improvement on petstore bench and about 10% in ar-bench.  In ar-bench getCurrentContext calls go from 14 million down to 2 million.  The remaining calls largely can be removed but they were much more invasive.
    
    IRubyObject op_eqq and op_equal both not have ThreadContext consumer, but we could see no use of this in any extensions and figured it worth the trouble of converting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c46b55d778b834455cf1cb5c088e3143b295df8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 4 20:36:19 2008 +0000

    Revert change in 6078 by making all post-block logic popFrameReal again. See JRUBY-2221 for a requirement that we revisit block framing to ensure we're doing the minimum amount of work.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da0e04bb97f94cf4a982110a25a62ac402eb0716
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 1 22:39:46 2008 +0000

    Eliminate popFrameReal calls from block posts, since they were only necessary when we reused the same frame object. Now that we're copying contents out, we don't need to do a "real" pop.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6078 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4a8d0c002367f44684bcdb677665abbb406a66e1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 20 19:43:48 2008 +0000

    JRUBY-1931: Wrong execption backtraces from unit tests (patch by Vladimir Sizikov and me)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5983 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7932c1b4b70dfbca3b22791898f19264cf9713cc
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 19 21:31:11 2008 +0000

    Partial fix for JRUBY-2112: Incorrect lines in exception backtraces.
    
    Also, added two more regression tests for backtraces.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5974 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c6ba8ed8aeb56f88c234ee97bc2318881460c74a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 26 08:37:44 2008 +0000

    Complete fix for JRUBY-2004: moved the type error logic into setConstantInModule so both compiler and interpreter get the benefit and added a test.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5753 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 55b1e747d6fd02d03695b731dbb28af9bef191a1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 25 23:45:51 2008 +0000

    Phase I: Stop using ISourcePosition in runtime
      - Removes need to manage extra fields in compiler reducing memory size of methods
      - Seperates setting of setting line and file (later commit will be doing a lot less setFile's)
    
    - Removed a chunk of dead code from RubyKernel.eval
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5747 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9ae5eeeb0fca80ff8a08f6467a9526b8ee05e41c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 16 11:09:09 2008 +0000

    Large refactoring of Main.java and Ruby.java, with some additional work on LoadService and RubyGlobals. Cleaned up loading logic, reordered into actual dependency order, and broke up into appropriat emethods. Inlined and simplified Main logic. Set up LoadService to be constructed immediately and initialized during init, as preparation for loadpath/classpath unification.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5628 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8b46a002826832ad729c01c1cc63f39c0e212515
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 20:45:02 2008 +0000

    Refactorings to support backtrace-only calls. This will be useful to make "native" calls that only rrequire backtrace information cheaper, since they won't initialize an entire frame. Also moved the annotation-based selection of a call config into a single place and modified frameless compilation to use backtrace-based call configs, as part of an effort to make frameless execution safer for general use (and unfortunately a little slower for now).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5559 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b29f999073fef23ffe521c434558100ca0818077
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 4 02:03:47 2008 +0000

    JRUBY-1858: JRuby reports wrong position in stack trace (patch by Takanori Ishikawa)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5485 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0784e926e30beeb329f26adcbf752b74ea116925
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 31 11:42:48 2007 +0000

    Remove extra framing from ProcMethod and MethodMethod, used for procs and method objects bound to a new method via define_method. Nice perf improvement on dispatch.
    Also refactored construction of ProcMethod into a common piece of code.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5446 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6bb89c4d85b8feccc3a60d23101c05ad094fd7c1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 29 22:32:19 2007 +0000

    Fix for JRUBY-1840, make sure correct RubyClass is pushed based on the incoming method's scope, not the previous scope.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5430 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e138e7380d7e56ee0e3a9d2f7817944bf2874c47
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 19 23:01:42 2007 +0000

    Cleanups and name-mangling unifications (along with a few compiler bug fixes) to make +C work during test runs and add full-file, forced AOT compilation to the test runs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5302 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d237a30fee4b2a8b2a34303eea80583c8a8872fd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 24 12:39:37 2007 +0000

    Added no-var and two-var versions of DynamicScope.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5019 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c2a66b641fbccc9c04d41a7171f4f99172a143a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 24 11:27:21 2007 +0000

    A fairly extensive refactoring of the relationship between bindings, blocks, and eval. Binding holds the frame and *containing* scope; this allows the binding contained within a block to be use for evals directly, rather than requiring hacks like the previous commit. When a block is invoked, a new DynamicScope is constructed at that time, rather than having an existing scope cloned. Similarly for evals, the first time a binding is used getEvalScope is called on the binding's scope (the containing scope for the eval). This causes a new eval scope to be created the first time and used for subsequent calls with the same containing scope. And again, this avoids contortions when constructing the binding, since the binding only need to contain the unchanging containing scope.
    
    This should make it a lot easier to implement the remaining specific-size dynamic scopes. It also simplifies scoping/binding logic and fixes a number of eval/binding/scoping issues.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5018 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ec4f90b7e092bb1469913ee818c3dcaf2a7c5070
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 24 04:50:54 2007 +0000

    Based on discoveries by Marcin, confirmed by Ola, adding capability for separate DynamicScope implementations that use fields instead of an array for scopes with small numbers of variables. This primarily improves compiled performance, since the compiler can statically dispatch to methods that amount to little more than field access. I will add additional DynamicScope impls for 0, 2, and 3 variable scopes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5015 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 171b97463f404ace7133ff250070ad2d482b5eaf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 10 23:08:37 2007 +0000

    Added a "frameless" compilation mode that will compile code without framing when possible. Specify -Djruby.compile.frameless=true
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4910 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1762f4b9535fb0d94be964b48bc9fc9ec3d5f051
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 10 10:25:30 2007 +0000

    Block refactoring: Break out executable block bodies into their own hierarchy, with Block as a closure abstraction to contain binding + body.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4901 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4bab7c8c05a043f327bf0ce0a21a569c7d6c5522
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 10 01:15:39 2007 +0000

    Pulling binding contents up to a superclass of Block
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4895 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 51a9840d9a84893d02e25f1069ed4a63fe0567e6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 3 23:26:34 2007 +0000

    Fix a couple minor NPEs in runtime
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4853 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff88db460cb1b29b04843a0384b3b2a3e2887d14
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 18 20:39:37 2007 +0000

    Reverting the frame-saving block changes from 4472; this will negatively impact block performance, but until we can isolate the problems Adam reported.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4606 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 466ce1e0176e42527a4ef569fda5901153c31324
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Tue Oct 16 15:48:25 2007 +0000

    Fix autoload logic error introduced in vars commit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4595 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95c346df5368a3f5f06fa9d14022efb85eaa6809
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Mon Oct 15 07:45:22 2007 +0000

    Vars have landed. Does not include concurrent SymbolTable (will follow in the next day or so). Also need multi-threaded unit tests, work in progress.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0dc14ed346f7108aa91f73c552949ec95be10c5b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 20:39:03 2007 +0000

    Revert an unsafe frame-saving in bindings, since bindings can be used in many places.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4538 961051c9-f516-0410-bf72-c9f7e237a7b7

commit be9df2d00c836a6c59b8f21e64a7dce11b0d34e4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Oct 4 05:33:12 2007 +0000

    Add a simple CPU sampler to JRuby
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4477 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 56e817adca9af37531fbcd13513e8138ae84bbf6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 3 18:04:00 2007 +0000

    Make block save the stack frame they'd normally wipe out by being activated, to avoid the cost of re-constructing and reinitializing it after the block terminates. A good 20% perf boost on block invocation benchmarks.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4472 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a70b007a27f8191431f2cd947653459c6c8f78c9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 3 12:19:45 2007 +0000

    Support for stack-based closures. Because the innermost closure's variables are not visible to any other scope, even when repurposed as a binding, those variables can safely be stack-based.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4470 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 309ff1f15d97d04991c2730648e966375e64cdb4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Sep 28 00:27:59 2007 +0000

    Fixes to top-level scoping for AOT-compiled methods, loading sequence, and some minor compiler tweaks to make rubygems start up and run correctly with AOT-compiled stdlib.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4412 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d5a9d67f499024e05eac1e7ea6bd25af8db19c86
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Sep 25 17:04:38 2007 +0000

    Add PreExeNode to represent BEGIN {} in AST.  Properly scope them like methods (even though they look like blocks).  Cleans up some old begin node logic in the parser also.
    
    END {} is not perfect, but it is good enough for any reasonable test I tried.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4397 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e8a4f5d489861c347007ffe947714a9eeb3e85dd
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Tue Sep 25 09:33:40 2007 +0000

    Port fix for JRUBY-1339 (const_defined? and defined?Constant) from 1_0 branch.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4387 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1589c3ecec8aff8c8826f645d48b3cbab247dbd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 24 13:34:54 2007 +0000

    Total refactoring of zsuper argument processing, and zsuper is now enabled in the compiler. We still need more/better tests and specs for zsuper, unfortunately.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4375 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 362877f03225371f08bdb47a4d1bdc589fd5aca8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Sep 21 06:51:20 2007 +0000

    Removing the overhead of constructing ISourcePosition objects for every line in the compiler; I moved construction to be a one-time <clinit> cost and perf numbers went back to where they were before.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4367 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da93dd9b1dd846030adeda074e68f156dcc3ef42
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 17 18:32:01 2007 +0000

    Enable super compilation! I had to disable an assertion to do it, but it doesn't seem to hurt things and I have a big fixme on it.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4342 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6af5f3ba4a10debbdf6d01469ea7d7f8b8a1326a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 17 06:50:13 2007 +0000

    Move the construction of source positions into ThreadContext, to avoid polluting generated bytecode with all that jazz.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4332 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6be5bc7b3c8b17c6c6f93af8cda2d3f1679ee4a3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 16 17:58:31 2007 +0000

    ClassVarDeclNode and RescueNode compiling; all tests pass...we're in the home stretch now!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4330 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 609d9e346496af1360bac1c72e82c9e88cc2ca0e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Sep 13 18:35:02 2007 +0000

    Improve speed of caller and raised exceptions
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4314 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9ba460f5941112fabd0c74c796035d11c4ad1d18
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Aug 30 00:34:22 2007 +0000

    Stuff comments into position for storage so that interpreter can save one reference of memory per AST node (we create A LOT of AST nodes)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4235 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 94809836f29c92e41775dda970535480491639ea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 29 12:50:45 2007 +0000

    - Enabled assertions during all test runs, and made fixes and modifications as appropriate to get those assertions passing again.
    - Removed -da from jruby startup script to allow specifying -J-da on command line
    - A few optimizations to IOOutputStream/IOInputStream to use CallAdapter and lightweight strings
    - Cleaned up the gaggle of private RubyString constructors to four core versions, and added lightweight versions of a few public construction methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4225 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9992bacc92bee3493bdba9bd5be7bf8e1628935c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 28 23:57:02 2007 +0000

    Module compilation working, plus a test of module inclusion into a class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4216 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c187d01e4b83fb3477c4d327c4ed825dc34a27df
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 27 15:21:11 2007 +0000

    Adding basic Fiber support using native threads. Fairly primitive, but the non-brutal tests from YARV pass, as well as most demo code I've found online.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4207 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c6cf24ec5dcacd54450eda3fa570b953c90abcdb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 16 07:28:35 2007 +0000

    Class compilation. Does it work well? Beats me, I just work here!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4166 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc17861832a4f30aecf7840dc1dcee181618f93f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 7 03:10:35 2007 +0000

    Move backref and lastline into Frame, since there's only ever one copy of them in a given frame. This also will make it possible to turn on stack-based variable AST inspection very soon.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4107 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3cadbc71353d6d46b6a3d9a9d8a74917e46da96d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jul 24 21:53:17 2007 +0000

    Add ScopeNode
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4056 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4b382c57e9526f55ca752f1e08cd8a91d2293ebd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 17 01:02:51 2007 +0000

    noSuper died quietly in the night. RIP.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4035 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 16f196d3737086934b96fa22fb59030462d20756
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 15 08:48:07 2007 +0000

    Added CallAdapter for smarter call-site invoations and put it to use in the AST. Next step, generated call adapters for compiled call sites!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4027 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9b81e344cce9846b7aef38ca3f461f34f46f4d54
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jul 14 03:54:58 2007 +0000

    Creating the concept of a CallConfiguration, which knows how to frame and scope a call. This will be used to alter the way an existing method frames and scopes in response to static or dynamic code profiling.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4015 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66308a41bee1215d2b084c8fde04156bb8707781
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 9 23:36:57 2007 +0000

    Merging CRef changes to trunk from enebo branch.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3984 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3a702509c34d17ebd8e78348652a03a0c3f70d7f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 6 07:19:35 2007 +0000

    Revert to type-specific JumpException subclasses to allow Java exception-handling to do more flow control work for us. Since most signs point to non-local returns (and other flow-control) in the upcoming Closures spec for Java using exceptions, this is going to safely remain into the future.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3964 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95108e35e65bb32045a421f84f8e0092391ecde3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 4 04:13:56 2007 +0000

    Fixes for JRUBY-1185, handle top-level visibility appropriately and use public visibility for module, class, and struct blocks.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3958 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 417d14632290d6ffe89169af88e7dd6e6c966455
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 4 01:26:42 2007 +0000

    Committing frame preallocation and recycling code, all remaining issues fixed. Nice perf boost for Ruby-implemented and fully-framed methods!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3957 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a9ab9b77c1c3ef1bc5a529a035f9777d02d07c1b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jun 25 16:14:55 2007 +0000

    Remove extra sample scripts which were removed for 1.0
    Last of ablaf is gone (clean up from removing serialization before 1.0)
    Conditional support for parsing with/without extra positioning information for IDE:
      - For runtime this saves considerable amount of memory/object creation during parsing
      - Runtime can still parse with extra positioning information if desired
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3913 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ed34bf8ea27223214f253a45aebb9202bf49511b
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Jun 13 12:53:03 2007 +0000

    Make method cache safe
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3874 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b4054a7cfceb6399d13c00b0cf849bf58962392f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 4 23:36:40 2007 +0000

    Minor optimization for dynscopes, to avoid the hoky parent check we added to prevent leaks.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3832 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b068a3754b8bfb7496516d7100fd94497088bd0
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 1 02:14:45 2007 +0000

    JRUBY-26: Various special globals should be thread specific and not shared by all threads
    JRUBY-1028: The special global variables "$=" and "$~" are not defined
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3799 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 56d9e338199a6cc44b709b69872175af3620b62b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed May 30 18:06:54 2007 +0000

    JRUBY-948: undefined methods are not preserved when a module/class is dup'ed.
    JRUBY-756: "private method called" issued for undefined methods with explicit receiver
    JRUBY-749: Visibility issue: private method reported as method_missing and not private in class_eval
    
    [Patch by Marcin]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3770 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ab8977aa4861824d215eda0c00d6f4cb1cfa607
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 27 05:58:09 2007 +0000

    Zero-sum (hopefully) refactoring of trace functions to have an "event hook" model more like MRI. ruby-debug (and likely jruby-debug in the future) makes use of this event hook mechanism, so we'll need to have it in place to make the port easy. Also in this commit, fixed JIT to actually be running (it got turned off accidentally sometime in the past week) and make sure it's using the same "safe" logic for def arguments.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3746 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b31b395a5fe5c90e1112c6f2a02856749644669c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 22 21:31:30 2007 +0000

    Fix for JRUBY-959: make ThreadContext.getLastLine return nil if null, for internal consumers of lastline.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3719 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83a460e959dc2b0d35a023c43b6460e8dedf1296
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 21 19:20:35 2007 +0000

    Fixed $! and $@ to be thread-local (or "thread-global" depending how you look at it). Only $? remains to be made thread-local.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3694 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 140e5e33de0d2c4cc2539378441282ea5f27bf2b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 21 07:47:30 2007 +0000

    A general attempt at JRUBY-967, use Frame[] to store backtrace frames until a backtrace is actually needed.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3693 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9f6241d841acfacf0e4147c8110611614b6e551
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 20 00:25:29 2007 +0000

    JRUBY-955: RubyModule public_method_defined?, private_method_defined?, protected_method_defined?
    JRUBY-24: position from passed in arguments not passed
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3687 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ffe36dc64337e1885d5139e5ba8cbe80db45de9a
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue May 15 23:49:00 2007 +0000

    JRUBY-936: The argumentsError is required in Struct.new (Koichiro Ohba)
    JRUBY-934: Unsupported NKF module (Koichiro Ohba)
    Various escaping JumpException errors we have seen in apps like Typo (which now works!)
    Remove some dead code
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3659 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5e8ecd81738e7e61a8b7d8a50c47d6095472550e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 6 23:40:41 2007 +0000

    JRUBY-916: Kernel.autoload has a couple of problems [active_scaffold blocker]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3629 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c2b14210deb1febc85f37134c8aa90c81daf4240
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 28 01:47:53 2007 +0000

    Migrate compiler to using interpreter-friendly data structures and TC. This makes it possible for us to enable safe jit as part of 1.0.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3577 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 76b88c9c47201d7844df3a8725b25a443e0a2dc7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 24 06:06:44 2007 +0000

    Adding support for compiling classes. All cases should be implemented, so it should technically be "safe", but it's not as robust as it ought to be (missing a try/finally around TC manipulation).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3547 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1093c0f42001011a18fe27a893c39192a1d8757
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 19 09:18:30 2007 +0000

    Reuse a single flow-control exception for each thread, rather than constructing new. Marginal performance gain (bm_vm1_simplereturn went from 47ish to 45/46ish).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3506 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9b519b179d2058aff8adbf33606542997cb9473b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 19 02:37:33 2007 +0000

    JRUBY-25: Cannot assign value to $~
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3502 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3205259a3e9cc1299b92d64d03a0f1ee6896ca6c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 17 17:55:47 2007 +0000

    Fix for JRUBY-766, and potentially for many other cases where returns weren't getting an appropriate jump target.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3487 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 230c86e278a356d3ddfbf778b24f9b9b2357e41e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 12 02:41:59 2007 +0000

    Mark frames as binding frames versus maintain a stack (merging safe stuff from my sandbox)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3437 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dce410d617322b8a3caf7121c38cd4ec3f4d809b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 12 01:39:53 2007 +0000

    wrapper not used....Remove from context and friends (Merging 'safe' things from my sandbox)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3436 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8fb40110ad0aca10556fe4276dbbb6ec642d273c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 11 04:06:22 2007 +0000

    JRUBY-796 Fix for a very big leak in finalizer definition and dynamic scope creation
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3fa144ebbc464129d9d83ee34463bab17c2d0f9b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 7 07:07:51 2007 +0000

    Added three more nodes to the compiler, added a couple extra STI methods the shootout uses, fixed a bug with dstr node compilation, enabled const nodes as "safe" since they appear to be working right in the contexts I've tried.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3407 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 210bfe06326742b4d486cc3c0daea9c96768f5ab
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 5 05:07:02 2007 +0000

    JRUBY-771 Remove CreateJumpTargetVisitor, in a temporary way until Tom's branch lands
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3390 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 07db95c0e646fe5e85ac11e911cf89f58e3f047e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 4 17:09:49 2007 +0000

    Partial fix for JRUBY-766, allow returns in a simple eval to propagate correctly. Still more to do.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3384 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9473f6143c362075836cf8063d35ecaff9fd37b1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 30 20:15:17 2007 +0000

    Added Binding.of_caller
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3342 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8f6b0db6f1ce0889396ef594b4253787895ea7ac
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 27 10:17:22 2007 +0000

    Remove unused reset method from pooling
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3290 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff605d1145e46c8d9a1ac73df2ad441d2a39f2fb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 27 10:15:56 2007 +0000

    Disable ThreadContext pooling (it didn't appear to help perf anyway, and broke a few tests) and add backport to "complete" jar build targets.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3289 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e2a4127c1c11154b019c43b5156ebdc3dda9f275
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 27 09:53:25 2007 +0000

    Added backport of java.util.concurrent APIs and thread-pooling code. Use -Djruby.thread.pooling=true to enable the use of a thread pool for new Ruby thread instances.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3288 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1a5741a0ba99a5bb95ff8c7ae709e7eb430583e8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Mar 22 19:28:22 2007 +0000

    Fix for JRUBY-713. Possibly not the best way to do it, though...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3265 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cc145d7e7c8b904a9702059f74e2737669232d5e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 06:18:02 2007 +0000

    Simplify evalInternal by pulling some nodes out as methods, and modify ListNode to use a Node[] instead of an ArrayList.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3184 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5d499b05fc77e37e38fcfab0a3d55159dbcf1e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 20:17:45 2007 +0000

    Eliminate ThreadContext.yield and add an overloaded version in Block instead. One less "utility" method on TC.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3181 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6e076e6a988e93a8e444c0d8799a4205e372336f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 18:09:59 2007 +0000

    Move callSuper out of ThreadContext
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3180 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 706e138886a4d18cdc2ffcd3a2c6125eef358abb
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Mar 3 10:02:54 2007 +0000

    Improve block speed somewhat, by optimizing the common paths
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3107 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b821c95f9fe15a1e93a4b2a7e7cad0ab32e377ba
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 21 20:26:42 2007 +0000

    - Rename all methods and frame to use same vocabulary for attributes and parameters.  Also make ordering of parameters similiar
    - Make AbstractMethod become DynamicMethod and remove DynamicMethod as an interface
    - Remove a couple of dead methods in ThreadContext
    - change .id to .object_id to get rid of extraneous warning messages
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3050 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2107e60085a5063bca76d897783a512bbd7eddc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 18 15:18:18 2007 +0000

    JRUBY-606: Get rid of un/under-used IRuby interface
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3022 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c87b1ca376c4a7ab16c50d3fe0bd84a66737dc5
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 13 21:06:49 2007 +0000

    evalUnder should use previous frames self instead of null
    removed some dead code in jumpexception and its use
    refactored jumpexception to use better names for data
    tweaked miguels patch for JRUBY-530 to work with my refactorings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2995 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 749523790f27dff81226c7e9f9967e4db450860d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 8 03:11:32 2007 +0000

    JRUBY-345: problem interpretting rails template with "for a in @b"
    JRUBY-353: "for x in y" breaks on object from java, "object.each do " still works
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2958 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ef423f1b886650195114fe952a1a6407fbb63f82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 7 22:27:41 2007 +0000

    - Create a NULL_BLOCK to replace null checks against blocks:
      - Now isGiven() on a block tells you whether it is supplied or not
      - yield on the NULL_BLOCK throw the correct exception
        - We were not throwing this correctly by most callers with my landing of
          the block branch
        - We were generating NPE in cases where we called something that requires
          a block and supply none
    - Block.blockObject => Block.proc
     - Rename and type since this is just a convenience reference for association
       from block to what proc it might represent
    - Remove unused blockAtCreation (this may become relevent for Ruby 2 but why do
      it now
    - Remove ThreadContext and IRuby from Frame
    - Remove Scope
    - Put Visibility directly on Frame
    - callingzsuper dead code
    - Now that modules have a proper superclass we can get rid of special code in
      callSuper
    - ArgsPushNode.childNodes should not return null
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2956 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b93d6e96bcaec3dcdf4ecd75356ad023ae1a41cd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 31 21:44:37 2007 +0000

    Beginnings of block compilation. Only basic scenarios work at the moment, no args support, no local or block variables support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2888 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f9fc55e73a74c5a8ff6318c8031c26b93400164
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 27 18:03:18 2007 +0000

    Some files did not commit right in the merge...take 2
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2852 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a04deaae0eaaeb55f513012bf633402a8c704055
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 23 01:24:43 2007 +0000

    Remove MetaClasses which were made dead by JRUBY-409
    Make STI for RubyFixnum and RubyBignum work again
    Removed some unused imports
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2819 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c0d62ad6149cc72a5f16f50c10937c268cb39e6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 19 20:44:34 2007 +0000

    Fix for JRUBY-459. Don't search Object for constants before current class's hierarchy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2791 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f043599b313eb012cd3560a822ca034b4756281f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jan 19 15:43:13 2007 +0000

    Compress backtraces like MRI does
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2787 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bce8d4857a5d6824c3c9318ab7c727474348a798
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jan 19 12:03:21 2007 +0000

    Added some support for posisitons, and also tail call counting
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2784 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 03d9ce5f8b307c3cc0241a81fc71e5999d3c24a4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 17 18:13:34 2007 +0000

    More fixes, cleanup for the compiler; jrubyc still a little iffy, fixes forthcoming.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2767 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dbdef380904ba217548f08f1de84e01fb569c9e7
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 14 16:30:39 2007 +0000

    Fix for JRUBY-429, and also make filenames more like MRI in backtraces.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2737 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 97b2ec4b358263fcd35023bb1f1b6c7cdba88a53
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 14 00:59:44 2007 +0000

    Big commit of work from last week:
    - Beginnings of STI-based dispatcher
    - CacheMap modifications to make STI "safe"
    - Code for JITing pure Ruby methods (currently disabled)
    
    Additional work on STI and the JIT will come along shortly. This will also fix current trunk failures during ant testing the compiler.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2732 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bb5a3579468d7a9af177dc08e8265e8a53171825
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Jan 13 14:23:40 2007 +0000

    Fix for JRUBY-435, this time checked with ant test, IRB, gem install and rails
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2729 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 867423f5c8b385a7acfd2eb1c98d291a9c0a906d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jan 9 14:33:34 2007 +0000

    Fix for JRUBY-357, make sure that methods defined at top-level will be private
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2710 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f00dfc9fcfb4c7a9ffbe605bd4cbf08cd2e9cb60
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 6 01:42:03 2007 +0000

    Committing changes for JRUBY-405. I've accomplished what I set out to do, which was moving all the yield logic into Block and other appropriate classes. Other block refactoring, including adding a block argument to the call pipline, will come in other JIRAs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2685 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 500ba393b2b73d865ca5180670a0a58543ea9947
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jan 5 21:54:50 2007 +0000

    Fix for JRUBY-406, giving blocks to a ZSuper-node
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2677 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32e3222d3defac9ee5f76c3651f4699f62271215
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 30 22:00:22 2006 +0000

    merging refactored method stuff plus fast/simple invocation changes to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 62645b2160c482d6d16d79513df80eac48c28894
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Dec 6 08:39:13 2006 +0000

    Fix for JRUBY-132, by Miguel Covarrubias
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2555 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb6e4cdcad9ecef3fd9bff58c92c45c57ac081e9
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Dec 5 10:09:29 2006 +0000

    Fix for JRUBY-93, make IRB stack traces good looking
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2548 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 35fcfa199a292c2650d9d9c02171d20c23038759
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Dec 1 06:10:06 2006 +0000

    Remove 1.5isms
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2522 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2279361a468d54ae941fd92ea2528ce4d9ac784e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 28 00:33:28 2006 +0000

    JRUBY-305: defined? used with a namespaced constant prevents test/unit from running
    [AKA - defined? was setting $! as a side-effect]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2496 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1278c5bb3507a052d150d814f15453542ae41aed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Nov 26 13:38:44 2006 +0000

    Fix for JRUBY-234, NameError.name, by Anders Bengtsson
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2486 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b87fee1b90fc7a4ff567235e2fc1387d035bbf31
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 19:46:24 2006 +0000

    Fixes JRUBY-154, JRUBY-158 and warns when arguments to blocks differ
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2481 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 43527512ed5edac73606a65971bfe9f8a7c23c7b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Nov 25 16:55:31 2006 +0000

    JRUBY-271:  Fix 3 for RSpec: catch / throw not working as it should
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2473 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b03a33fdc382e7dc10b580dfa638c0a974dfc97
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 11:57:15 2006 +0000

    Merging of openssl branch
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 278819904d461c32545531d3679635b084dad620
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 21 23:08:28 2006 +0000

    Make function tracing thread safe (untested but pretty safe -- then again aren't these the ones that always bite me :))
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2449 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 174e3d01468001668ab299227d4af11aea65341c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 14 03:09:59 2006 +0000

    damn the torpedos! full speed ahead! landing enebo_lexical branch changes plus TC-passing optimizations and a few small compiler updates
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d754c5ea1e7ecf48249d8a18bb2a3db8877a1a7b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 12 15:15:55 2006 +0000

    optimizations for ThreadContext:
    - replace ArrayList-based stacks with managed arrays
    - replace visitor-based AssignmentVisitor with a straight-through version
    - remove unnecessary setCRef in yieldInternal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2326 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3f04b7ea16a8eaf59cf5de721f876360711e6521
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 10 05:18:55 2006 +0000

    cleaning up a large number of looped calls to IRuby.getCurrentContext
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2320 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6e15491217631472c05c6928672f9c7064a978b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 9 22:13:11 2006 +0000

    merging new interpreter plus a few minor fixes to trunk. JRUBY-185
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ceffe79dbd92962b567ab21dbdfdeb3ac9443190
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Sep 30 00:51:59 2006 +0000

    JRUBY-50: ensure "self" has been set for adopted threads
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2256 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 524049357e360ba81a21756f54071c67d3796180
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 7 01:40:03 2006 +0000

    merging headius to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a629a570985930f1dc88f37bf2c585dfe4ff6fb2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 17 01:38:04 2006 +0000

    merging headius branch to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2204 961051c9-f516-0410-bf72-c9f7e237a7b7

commit daa8df0894b866ade9e451a5a86b147b2a01ba79
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 21 19:00:14 2006 +0000

    wrapping remaining iterStack operations
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2138 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a4f0767b95d3611afc659bb5633fe65f5e12d431
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 14 01:58:09 2006 +0000

    backing out evalstate thing...needs more analysis
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2123 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 792576ec655d91b1336d661913aafa21b14b6e20
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 13 22:19:52 2006 +0000

    optimizations to method invocation: eliminate creation of EvaluationState per-Frame if no evaluator is needed for a given method
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2119 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9d3d790f078f9eaf21cafa0dbb57154bafb08d59
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri May 26 01:49:38 2006 +0000

    - Binding is using wrong class with eval (This fixes something Rails-related)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2044 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9491cdd987a6ef845265b8a8bf1cbf5a1f25c67e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 26 00:44:01 2006 +0000

    merging to head:
    - interned strings optimization
    - irb scoping fix + test
    - EvalState reorganization
    - ThreadContext block stack refactoring
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2040 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1275f1a453a7b6bff30218151e0ac8cc06f12113
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 6 16:06:32 2006 +0000

    - eliminated BlockStack class, handling Blocks as a stack of linked lists in TC now
    - deleted ScopeStack, which was no longer being used
    - modified block-manipulating pre/post code to not require clients save the old block
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1972 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 408ba0b04448fd6ff645ed5c2c99654ac80634bf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 29 16:49:17 2006 +0000

    fix for adopting threads; cref was not being primed as for main and ruby threads
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1959 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5073cc752efc231540d1aa632ff959ad6cc1aeda
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 9 20:02:46 2006 +0000

    merging eval, array, lastclass, and jirb changes from cnutter_work1
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1916 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 981d76c8b595dfbe131493e89ca5ff7db5834a2e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 6 15:52:40 2006 +0000

    fix parser to know when it's called from within a block; dvar vs lvar decisions depend on it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1908 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aacfd3dc00ba7229ca7ea67a634ae69d3f42a538
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Feb 25 23:21:47 2006 +0000

    Defined? was throwing a NameError when encountering an undefined Constant
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1896 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 805d73b7462174e9e5c095eed22a09140bb79b5e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 14 21:41:28 2006 +0000

    various nesting fixes, plus a few test cases for these and other recent fixes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1883 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb50ab3c7036be75529b4052433dceb86b64349d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 14 17:44:29 2006 +0000

    Modified Scope to use arrays for local var names and values instead of ArrayLists
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1882 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a1b8fc1d456e3d5c6e01579b88773383068aa85c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 10 21:53:27 2006 +0000

    merging changes from cnutter_work1:
    - cref fixes
    - loadservice fixes for irb
    - binding
    - misc other fixes from playing with irb and RoR generate script
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1878 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d43870a42678f709851fcd9349d32a5f5be0dca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 2 19:51:50 2006 +0000

    merging cnutter_work1 to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 12a07cbe05d028e2ab4b0fddf61ae5467fb24e70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 23 18:31:55 2006 +0000

    landing the "adopted thread" patch
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1863 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 91c90ad7983c7147495dd2f81b507c8a28fce425
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 23 06:20:50 2006 +0000

    removing Stack import
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1862 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3d51cd2992606ce53bad9db214359a83c772b500
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 23 06:15:58 2006 +0000

    unsynhronizing stacks in ThreadContext, since they're never used across threads
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1861 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1293eda8454686e846e2a9837b348e2983bb423
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 21 14:30:32 2005 +0000

    Positioning fixes
    JRuby library added
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1845 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a861abc8c193efe6913b2193721e6dfdb346a784
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 29 17:22:09 2005 +0000

    Remove all remaining warnings that eclipse 3.1 complains about (I may not have defaults on warnings).  These are mostly just hidden instance variable warnings.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1841 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 430c51a905a882b8fe6dc1b0760987c9bcdf311d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 29 01:21:42 2005 +0000

    a bit more refactoring into TC
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1838 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b98e7c8429dbb9a3d7aa7c6c8a3026a44f027a71
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 27 23:29:58 2005 +0000

    moved frame/scope/other stack manipulation into ThreadContext to centralize it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1837 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ede4bfb0b4fcc29ce09b82da5f1164b5894d258
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 10 15:09:14 2005 +0000

    TC method refactoring, renaming, inlining of TC-related IRuby methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1825 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a1a6cebc8670e0beb27e1a9ddc0325c7a3ba97e6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 4 18:03:34 2005 +0000

    centralizing blockstack accesses
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1824 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d373bb7973cf5cfb3a360f3ce2549efcef634633
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 4 16:12:48 2005 +0000

    centralized iterstack access into ThreadContext, cleaned up some warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1823 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2101b189741a176812aef3af116f64830bd42223
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 29 00:53:50 2005 +0000

    modified setRubyClass/getRubyClass crap on ThreadContext to use a stack, so callers don't have to save the "lastRubyClass" to reset it later
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1819 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c0de34dee5f649017453c9ff70198fb178343d2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 28 15:47:18 2005 +0000

    refactoring: decoupled all code from manipulating the frame and scope stacks directly; eliminated custom stack impl for frame stack
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1817 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 689e4cee8f6335d3271b7d65173d0100dfeb7be5
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 27 17:06:51 2005 +0000

    RubyModule.call -> RubyObject.callMethod (allows instance.callMethod(...)) [Note: Should be renamed RubyObject.call]
    Remove redundant method_missing
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1813 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 41adc9d73b44b14dd25593e772188d405ec00f2f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 26 05:34:12 2005 +0000

    removing revision keywords
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1810 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e8391ba0c663add06aa24ff66fa21afc8f3f78a0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 23 03:16:31 2005 +0000

    committing LastCallStatus refactoring...it's pretty benign, and the exposure is minimal
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1809 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5643d27aa7a2dd836ef19c758a0a13351434da4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 21 01:04:27 2005 +0000

    merging cnutter_work2 to HEAD...damn the torpedos! full speed ahead!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1807 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 01ca9286afda4864b9a97217ebe1c30f79ccd45b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 20 16:21:41 2005 +0000

    big refactoring of method calling, moved scoping/framing resposibility to methods themselves, eliminated RubyModule.call0, renamed method callables appropriately
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dfdacd80c56018084c618f3bbab7b542653d95e
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 13:07:06 2005 +0000

    Introduced IRuby interface for Ruby runtime object.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3437afe431124a2f60cf7e37c579b0c60ed0bf95
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Sep 30 17:39:23 2005 +0000

    Merge of TOM_RDT_POSITION branch
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1780 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 36ec84bb4bc5dbd391c6ddb676b2faeb380f0539
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 6 14:57:59 2005 +0000

    merging exception-removal changes to HEAD; EvaluateVisitor changes left on branch for now
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1757 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca6b16e996ea9af83ce593594b9c69b9364a9924
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 13:29:33 2005 +0000

    Kill RubyClasses (core class/modules now initialized in Ruby)
    Store all top-level classes as constants within Object (fixes things like Object.constants) instead of second datastore
    Always load all core classes (remove lazy loading)
    Convenience function RubyModule#getClass added
    Convenience function Ruby#getObject added
    JavaObject and JavaArray are now Java::JavaObject and Java::JavaArray to be consistent
    classes defined under another class/module are now defined in the parents creation routine
    Removed some masking warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1739 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8b4fbb174a8d1b2fb6b9b2f7d8444e5ec923dea2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Aug 2 19:27:31 2005 +0000

    Calling super from a module method causes a NullPointerException (should call Object method)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1733 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50d6342dd5da06c42d25bc955addce6aaa0e6b97
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Aug 1 17:12:52 2005 +0000

    Creating extra block when we shouldn't (fixes Roberts builder example from mailing list)
    Java List objects can now use collect without throwing exception
    Remove 'construct' from Enumerable
    Smaller block/proc fixes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1732 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a36ff3729d6a7f2c61eb51273fcee3d3bd371350
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jun 18 14:47:06 2005 +0000

    More moving towards java.util.Stack contract for remaining Abstract Stack users
    args are never null (we no longer null check with a few strategic asserts)
    getPosition() always returns something from Nodes (we no longer null check)
    Remove AttrSetNode (fake parser node) in favor of CallbackMethod
    we were pushing/popping an extra dynamic vars set every yield
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1715 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0db25dd3ae06c744963d9b04bf3465fa3673f030
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 16 14:54:07 2005 +0000

    Move abstract stack users a few steps closer java.util.Stack contract
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1711 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2877086aadae87499cd556980b8dfaabd7c346ea
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu May 12 17:47:19 2005 +0000

    Function now unused
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1697 961051c9-f516-0410-bf72-c9f7e237a7b7

commit abfe85d15f992ecf4447b155d177050fe2239c3b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 8 16:58:03 2005 +0000

    Remove classStack with two RubyModule references (should fix at least one concurrency bug with blocks)
    Object#methods returns protected methods
    RubyModule.getConstant a little more sane
    f = Class.new; class << f was not working properly
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1687 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a036caac77f004164f13cd701d62ed5fcfa9e94f
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Tue Apr 19 15:11:29 2005 +0000

    Elimnate ArrayStack in favor of java.util.Stack
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1677 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a83c48af56081c1c2132111d535f28d10cf3afb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 31 20:55:52 2004 +0000

    Update license to GPL/LGPL/CPL
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e3d0f88457c348a7f5a76fbb93aca76cea9bc3e4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 27 02:06:26 2004 +0000

    added mutator for class stack; perhaps dangerous?
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1570 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 578d20e77256dbe26b39d560fa21abcb3ad75642
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 24 09:52:13 2004 +0000

    expose class stack for additional constant lookup fix
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1546 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7aa3f3a2afa533d36f27e88792ee1b8958cbcc89
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 23 09:02:20 2004 +0000

    popClass should return the RubyClass popped
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1533 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bcba816d780cd937c8bb29fcff51609e6ddb194c
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Wed Dec 22 10:16:39 2004 +0000

    replace java.util.Stack with ArrayStack
    remove unused methods from ArrayStack
    make it compatible to java.util.Stack
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1525 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ac05712e069aeec833f2381d024af55e26f149b9
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sat Dec 18 09:24:31 2004 +0000

    remove statics from classes ArgsUtil, ListNodeUtil and NodeUtil
    remove meanless comments from ExpressionVisitor and BreakStmtVisitor
    don't use static shared instances of those classes because that's not threadsafe
    (I changed both DefaultParser.y and .java to keep them in sync without recreating the last from the first one)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1495 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 870e1da9b41bfdbae259e1fc5f18fc8b76686998
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 09:25:42 2004 +0000

    removes the instance variable runtime in RubyObject
    reintroduces the variable in RubyNil, RubyBoolean, and RubyClass
    delegates all calls to Fixnum,Array,Boolean,String,ArgumentError,IndexError and TypeError.newXXX to Ruby
    fixes all imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8b298a6eb1dcfc80f506a39212148e67417d8a1f
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sat Dec 4 09:50:03 2004 +0000

    remove unused imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1446 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e6b5100a49718fc8d3cf73e804b366eae694748d
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Nov 29 14:12:07 2004 +0000

    Remove (or add a comment) to some empty blocks.
    Remove unused RubyDir#matches method.
    Remove some RegExp Adapter remains.
    Rename RubyObject#argCount to RubyObject#checkArgumentCount
    Fix the stacktrace of Exceptions.
    Fix RubyFile#expand_path method.
    Add LocalJumpError class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1434 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df7cf7c9f898a4719c7c15b6b000bb3127a599ff
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 8 03:58:21 2004 +0000

    Renamed ThreadClass to RubyThread and KernelModule to RubyKernel
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1401 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 035c46fd66ac254cb294f8151bb458a672b46112
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Oct 30 22:27:08 2004 +0000

    Remove unlikely to be used soon abstractions and simplify lexing
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1373 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6c06bf07f2f69a835c42ff26b6820fca1ebacbea
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Oct 26 02:53:40 2004 +0000

    For now use ordinary Stack instead of internal handcrafted one
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1365 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3667b6ccac740984972f19731b5b12b76b1f8e94
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Aug 7 22:01:36 2004 +0000

    Add support for optional argument to Array#first
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1324 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 38986c078c0e951e68bca7521240fd133d68c8e1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 1 16:17:23 2004 +0000

    constants refactoring
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1310 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5c9a1ebd775712f2dc086acfce1a14a123ec632
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue May 25 15:54:04 2004 +0000

    Another round of star arg grammar fixes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1302 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0fe190697fb38dacdaa0ca5fd7fdaa0d2b15cc82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Mar 13 22:43:20 2004 +0000

    Add 1.7 break/next return value
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1285 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f73e34300ee97d2f4b138bcae10174f538fe99de
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 12 20:55:53 2004 +0000

    A Module knows enough about itself to not need ThreadContext calculate nesting for it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1282 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 158bab74478b3ca0925ddbd2a5c73d4ef53d75f3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 12 19:38:42 2004 +0000

    Coalecse various getName signatures to just one
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78aa92151dae92d79ef468340e5aa55c4751851b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Mar 1 19:55:36 2004 +0000

    Only flush specific name from method-cache if possible.
    Removed a little unused code in frame classes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1258 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a16b4a3596853f2153bfe0df0a8cbe54382d5d58
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Feb 28 23:00:58 2004 +0000

    Removed a lot of old IndexedCallback stuff.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1254 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7cc17377cbd013da3a67c3ddceecd9d4672c5204
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 26 17:18:59 2004 +0000

    Fixes rubicon errors for Module ModulePrivate, and Access.  Minor refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1250 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0a47b75206b354a71f44403969da5da8b33c2662
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 20:10:56 2002 +0000

    Removed Namespace entirely.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1148 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 042ffdc92fad4e1ba53771dea8e1f7acd98fce77
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 18:11:34 2002 +0000

    Removed the parent-reference from Namespace.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1146 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aa13ba4003e9a41f754a04d31d963f7054476866
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 01:05:17 2002 +0000

    Introduced a parent-reference for modules.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1145 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f7f3ecbecc82a32d63df5e62442ebc97a0faeee1
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 23:31:21 2002 +0000

    Removed some dead code; Changed getConstant() impl. a bit.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1144 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 045dd89b1d068325699444b2707bc84ba6e5abb0
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 19:20:29 2002 +0000

    Changed implementation of Module#nesting
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3f60c3c0132c0727bd9dd14edb98206aaa30e93c
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 01:15:06 2002 +0000

    Moved the getConstant method
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1142 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06e5367e90e48166b55d8b7db5dfb40b4d8b563a
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 00:44:50 2002 +0000

    Replaced all uses of getCBase() with getRubyClass().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 52fb3673b53131e10b62e6e1b14b08895b651357
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sun Nov 17 01:11:15 2002 +0000

    A little namespace refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1129 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bfdd0cbb34e85721d77e215e111c3176616f905b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 16 01:17:40 2002 +0000

    Some thread service refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1128 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 17dce0f3131da9fdafbea3b8bbaf8e6f1ba548cf
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Nov 14 00:22:33 2002 +0000

    Re-implemented Module#nesting().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1121 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82ec4b9b5c4588e79a7ebd9845469fd42332e81c
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 23:52:35 2002 +0000

    Reverted all namespace changes. Our unit tests are in some cases crap, it turns out. ;)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b5314cc602e90f6295da87ef145fc29369655b2
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 22:35:15 2002 +0000

    Removed the use of namespaces for Module.nesting()
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1119 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6f016a73c3a027804fa73be3128c8a0ef8f0bf1b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 21:33:29 2002 +0000

    Replaced some usages of namespaces with the class stack.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1113 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1901a589fb458e0e24c66d0a2f1dc9aab1eff78d
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 12 13:12:57 2002 +0000

    Extracted a method getModule()
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1104 961051c9-f516-0410-bf72-c9f7e237a7b7

commit db825996b1895dae1eb261e8664a736f73cdad4f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 16:59:49 2002 +0000

    Some thread-context refactorings.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 36b4d0f7943d04e5a880cf6a13afd31dc922577a
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 15:48:46 2002 +0000

    Some ThreadContext related refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1096 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 13e69799e76f1dd3ab5912856ce9b0d9ff6e99af
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 15:12:41 2002 +0000

    Moved classStack and wrapper to ThreadContext; Cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1095 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6dd76e88b676c4c1a5fd076e13cd597ecac04c51
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Thu Oct 31 23:18:53 2002 +0000

    - remove unused classes.
    - update headers.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1064 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ae34b4c7d6ef80eec961468fba8544588a1c48e
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Oct 28 15:30:50 2002 +0000

    Cleaned up Frames (removed tmp Frames among other things)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1044 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6e143e1ded2275ed4da3449d4a13446b099f800d
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sun Oct 20 21:44:53 2002 +0000

    Fixed bug with eval() calls destroying local variables.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1003 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 745fd2937784c89da81a0623e87a84fa1f5adda4
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Oct 16 21:50:01 2002 +0000

    Added a single-value instance cache on DefaultLexerPosition.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@994 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f25d6d4a9c0b8ed208795c381a98b42fdf2ab37d
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Fri Oct 11 18:46:48 2002 +0000

    Small refactorings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@968 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 050d88c5d7dca72a9f06e170d2f53a5338f475fb
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Sep 28 00:35:29 2002 +0000

    Tiny cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@916 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d667713f53902eb2be9e22076d1ecb9c190388a9
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 17 13:07:22 2002 +0000

    - performance boost by removing "new IRubyObject[0]"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@839 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 424f4dce081733e30bf2599389978a4b67bee3b2
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 12 15:23:56 2002 +0000

    Dynamic variables now in a custom container instead of HashMaps.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@807 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e99afd11d8db75f685ae3c24e84d889751a1dc2f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 12 13:43:33 2002 +0000

    Various cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c77b91f42c4f3810140d44cbe603248a1d52b7ee
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 10 15:18:12 2002 +0000

    - restructure of the code tree.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@782 961051c9-f516-0410-bf72-c9f7e237a7b7
